/* ── Reset & Base ──────────────────────────────────────────── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
[hidden]{display:none !important}
:root{
  --bg:#0A0E17;
  --surface:#111827;
  --surface-2:#1F2937;
  --surface-3:#374151;
  --text:#E5E7EB;
  --text-2:#9CA3AF;
  --muted:#6B7280;
  --provider:#38BDF8;
  --provider-dim:rgba(56,189,248,.12);
  --provider-glow:rgba(56,189,248,.25);
  --consumer:#FB923C;
  --consumer-dim:rgba(251,146,60,.12);
  --consumer-glow:rgba(251,146,60,.25);
  --border:#1E293B;
  --border-2:#334155;
  --success:#34D399;
  --warning:#FBBF24;
  --danger:#F87171;
  --radius:10px;
  --radius-sm:6px;
  --radius-xs:4px;
  --shadow-sm:0 2px 8px rgba(0,0,0,.3);
  --shadow-md:0 4px 16px rgba(0,0,0,.4);
  --transition:.18s cubic-bezier(.4,0,.2,1);
  --mono:'SF Mono',SFMono-Regular,Consolas,'Liberation Mono',Menlo,monospace;
  --log-height:44px;
}
html,body{height:100%;overflow:hidden}
body{
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  font-size:13px;
  display:flex;flex-direction:column;
}
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border-2);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--muted)}

/* ── Header ───────────────────────────────────────────────── */
.app-header{
  display:flex;align-items:center;gap:.75rem;
  padding:0 1.25rem;height:50px;flex-shrink:0;
  background:#080D15;border-bottom:1px solid var(--border);
  z-index:100;
}
.header-back-btn{
  display:flex;align-items:center;justify-content:center;
  width:32px;height:32px;border-radius:var(--radius-sm);
  color:var(--text-2);text-decoration:none;transition:all var(--transition);
}
.header-back-btn:hover{background:var(--surface-2);color:var(--text)}
.header-back-btn svg{width:18px;height:18px;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.brand{display:flex;align-items:center;gap:.5rem}
.brand-icon{width:20px;height:20px;fill:none;stroke:var(--provider);stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
#brand-text{font-weight:700;font-size:.9rem;color:var(--text);letter-spacing:.3px}
.header-spacer{flex:1}

/* ── User Menu ────────────────────────────────────────────── */
.user-menu-wrap{position:relative}
.user-avatar-btn{
  width:32px;height:32px;border-radius:50%;border:none;
  background:var(--surface-2);color:var(--text-2);font-size:.65rem;
  font-weight:700;cursor:pointer;transition:all var(--transition);
}
.user-avatar-btn:hover{background:var(--surface-3);color:var(--text)}
.user-menu{
  position:absolute;right:0;top:calc(100% + 6px);
  background:var(--surface);border:1px solid var(--border);
  border-radius:var(--radius);box-shadow:var(--shadow-md);
  min-width:180px;padding:6px;z-index:200;
}
.user-menu-info{padding:8px 10px;font-size:.78rem;color:var(--text-2);border-bottom:1px solid var(--border);margin-bottom:4px}
.user-menu-section{padding:4px 6px}
.locale-switch{display:flex;gap:4px}
.locale-switch-btn{
  flex:1;padding:4px 0;border:1px solid var(--border);border-radius:var(--radius-xs);
  background:transparent;color:var(--text-2);font-size:.72rem;font-weight:600;cursor:pointer;transition:all var(--transition);
}
.locale-switch-btn.active{background:var(--surface-2);color:var(--text);border-color:var(--border-2)}
.user-menu-item{
  display:block;width:100%;padding:8px 10px;border:none;border-radius:var(--radius-xs);
  background:transparent;color:var(--text-2);font-size:.78rem;text-align:left;cursor:pointer;transition:all var(--transition);
}
.user-menu-item:hover{background:var(--surface-2);color:var(--text)}

/* ── Buttons ──────────────────────────────────────────────── */
.btn{
  display:inline-flex;align-items:center;gap:6px;
  padding:7px 14px;border:1px solid var(--border);border-radius:var(--radius-sm);
  background:var(--surface);color:var(--text);font-size:.78rem;font-weight:600;
  cursor:pointer;transition:all var(--transition);white-space:nowrap;
}
.btn svg{width:14px;height:14px;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.btn:hover{background:var(--surface-2)}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn-sm{padding:5px 10px;font-size:.72rem}
.btn-sm svg{width:12px;height:12px}
.btn-primary{background:var(--provider);color:#000;border-color:var(--provider)}
.btn-primary:hover{background:#60CDFF}
.btn-secondary{background:var(--surface-2);border-color:var(--border-2)}
.btn-secondary:hover{background:var(--surface-3)}
.btn-danger{background:var(--danger);color:#fff;border-color:var(--danger)}
.btn-danger:hover{background:#ef5555}
.btn-accent-provider{background:var(--provider-dim);color:var(--provider);border-color:rgba(56,189,248,.3)}
.btn-accent-provider:hover{background:rgba(56,189,248,.2)}
.btn-accent-consumer{background:var(--consumer-dim);color:var(--consumer);border-color:rgba(251,146,60,.3)}
.btn-accent-consumer:hover{background:rgba(251,146,60,.2)}

/* ── Main Container ──────────────────────────────────────── */
.main-container{
  flex:1;display:flex;flex-direction:column;min-height:0;
}

/* ── EDC Status Bar ──────────────────────────────────────── */
.edc-status-bar{
  display:flex;align-items:center;justify-content:space-between;
  padding:5px 16px;background:#080C14;
  border-bottom:1px solid var(--border);flex-shrink:0;gap:12px;
}
.status-bar-left{display:flex;align-items:center;gap:6px}
.status-bar-group{display:flex;align-items:center;gap:8px}
.status-bar-label{font-size:.58rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;min-width:60px}
.status-bar-item{display:flex;align-items:center;gap:4px}
.status-bar-text{font-size:.62rem;color:var(--text-2);font-family:var(--mono);white-space:nowrap}
.status-bar-sep{width:1px;height:16px;background:var(--border);margin:0 6px}
.status-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0;background:var(--muted)}
.dot-running{background:var(--success);box-shadow:0 0 6px rgba(52,211,153,.4)}
.dot-stopped{background:var(--danger);box-shadow:0 0 6px rgba(248,113,113,.3)}
.dot-unknown{background:var(--muted)}
.status-bar-right{display:flex;align-items:center;gap:6px}

/* Status Buttons (colored) */
.status-btn{
  display:inline-flex;align-items:center;gap:5px;
  padding:4px 12px;border-radius:6px;font-size:.68rem;font-weight:600;
  cursor:pointer;transition:all var(--transition);white-space:nowrap;border:1px solid transparent;
}
.status-btn svg{width:12px;height:12px;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.status-btn:disabled{opacity:.4;cursor:not-allowed}
.status-btn-start{background:rgba(52,211,153,.12);color:#34D399;border-color:rgba(52,211,153,.25)}
.status-btn-start:hover:not(:disabled){background:rgba(52,211,153,.22)}
.status-btn-stop{background:rgba(248,113,113,.1);color:#F87171;border-color:rgba(248,113,113,.25)}
.status-btn-stop:hover:not(:disabled){background:rgba(248,113,113,.2)}
.status-btn-restart{background:rgba(251,191,36,.1);color:#FBBF24;border-color:rgba(251,191,36,.25)}
.status-btn-restart:hover:not(:disabled){background:rgba(251,191,36,.2)}
.status-btn .spinner{
  width:12px;height:12px;border:2px solid transparent;border-top-color:currentColor;
  border-radius:50%;animation:spin .6s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* ── Split View Wrapper ──────────────────────────────────── */
#edc-split-view{
  flex:1;display:flex;flex-direction:column;min-height:0;
}

/* ── Split Container ──────────────────────────────────────── */
.split-container{
  flex:1;display:grid;grid-template-columns:1fr 1px 1fr;min-height:0;
}
.split-divider{background:var(--border)}

/* ── Panel ────────────────────────────────────────────────── */
.edc-panel{display:flex;flex-direction:column;min-height:0;overflow:hidden}
.panel-header{
  display:flex;align-items:center;gap:8px;
  padding:8px 16px;border-bottom:1px solid var(--border);flex-shrink:0;
}
.provider-header{background:rgba(56,189,248,.04)}
.consumer-header{background:rgba(251,146,60,.04)}
.panel-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0}
.provider-dot{background:var(--provider);box-shadow:0 0 6px var(--provider-glow)}
.consumer-dot{background:var(--consumer);box-shadow:0 0 6px var(--consumer-glow)}
.panel-title{font-weight:700;font-size:.72rem;letter-spacing:1.5px;text-transform:uppercase}
.provider-title{color:var(--provider)}
.consumer-title{color:var(--consumer)}
.panel-participant-id{font-size:.62rem;color:var(--muted);font-family:var(--mono);font-weight:500}
.panel-status{margin-left:auto;font-size:.65rem;color:var(--muted)}

/* ── Panel Tabs ───────────────────────────────────────────── */
.panel-tabs{
  display:flex;gap:0;border-bottom:1px solid var(--border);flex-shrink:0;
}
.panel-tab{
  flex:1;padding:7px 0;border:none;background:transparent;
  color:var(--muted);font-size:.7rem;font-weight:600;cursor:pointer;
  transition:all var(--transition);border-bottom:2px solid transparent;
  text-align:center;
}
.panel-tab:hover{color:var(--text-2);background:var(--surface)}
.provider-panel .panel-tab.active{color:var(--provider);border-bottom-color:var(--provider);background:var(--provider-dim)}
.consumer-panel .panel-tab.active{color:var(--consumer);border-bottom-color:var(--consumer);background:var(--consumer-dim)}

/* ── Panel Content ────────────────────────────────────────── */
.panel-content{flex:1;overflow-y:auto;min-height:0}
.tab-section{display:none;flex-direction:column;padding:12px 16px;min-height:100%}
.tab-section.active{display:flex}

/* ── Tab Toolbar ──────────────────────────────────────────── */
.tab-toolbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.tab-toolbar h3{font-size:.82rem;font-weight:700;color:var(--text)}
.tab-toolbar-actions{display:flex;gap:6px}

/* ── Create Forms ─────────────────────────────────────────── */
.create-form{
  background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);
  padding:12px 14px;margin-bottom:12px;
}
.form-row{margin-bottom:8px}
.form-row label{display:block;font-size:.68rem;color:var(--text-2);text-transform:uppercase;letter-spacing:.8px;margin-bottom:3px}
.form-row input,.form-row select{
  width:100%;padding:6px 10px;background:var(--bg);border:1px solid var(--border);
  border-radius:var(--radius-xs);color:var(--text);font-size:.78rem;font-family:var(--mono);outline:none;
  transition:border-color var(--transition);
}
.form-row input:focus,.form-row select:focus{border-color:var(--border-2)}
.form-row input::placeholder{color:var(--muted)}
.form-row input[readonly]{opacity:.65;cursor:default;border-color:var(--border)}
.form-row select{cursor:pointer}
.form-row select option{background:var(--surface);color:var(--text)}
.form-row-inline{display:flex;gap:12px;flex-wrap:wrap}
.form-row-inline label{display:flex;align-items:center;gap:4px;text-transform:none;font-size:.72rem;cursor:pointer}
.form-row-inline input[type="checkbox"]{width:auto;accent-color:var(--provider)}
.proxy-checkboxes{display:flex;gap:10px;flex-wrap:wrap;margin-top:4px}
.proxy-check{display:flex;align-items:center;gap:4px;font-size:.7rem;font-weight:500;color:var(--text-2);
  cursor:pointer;padding:4px 10px;border-radius:6px;background:rgba(255,255,255,.04);border:1px solid var(--border);transition:all var(--transition)}
.proxy-check:hover{border-color:var(--provider);color:var(--text)}
.proxy-check input[type="checkbox"]{width:auto;accent-color:var(--provider);margin:0}
.form-actions{display:flex;align-items:center;gap:8px;margin-top:8px}

/* ── Settings ─────────────────────────────────────────────── */
.settings-section{max-width:500px}
.settings-section h3{font-size:.82rem;font-weight:700;color:var(--text);margin-bottom:14px}
.connection-status{font-size:.72rem;font-weight:600}
.connection-status.ok{color:var(--success)}
.connection-status.err{color:var(--danger)}

/* ── Object List ──────────────────────────────────────────── */
.object-list{display:flex;flex-direction:column;gap:6px}
.object-card{
  background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);
  padding:10px 12px;transition:all var(--transition);
}
.object-card:hover{border-color:var(--border-2)}
.object-card-header{display:flex;align-items:center;justify-content:space-between;gap:8px}
.object-card-id{font-family:var(--mono);font-size:.72rem;font-weight:600;color:var(--text);word-break:break-all}
.object-card-type{font-size:.62rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px}
.object-card-actions{display:flex;gap:4px;flex-shrink:0}
.object-card-actions button{
  width:24px;height:24px;border:1px solid var(--border);border-radius:var(--radius-xs);
  background:transparent;color:var(--muted);cursor:pointer;display:flex;align-items:center;justify-content:center;
  transition:all var(--transition);
}
.object-card-actions button:hover{background:var(--surface-2);color:var(--text)}
.object-card-actions button svg{width:11px;height:11px;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.object-card-actions .btn-delete:hover{color:var(--danger)}
.object-card-body{margin-top:6px;font-size:.68rem;color:var(--text-2)}
.object-card-json{
  margin-top:6px;padding:6px 8px;background:var(--bg);border-radius:var(--radius-xs);
  font-family:var(--mono);font-size:.65rem;color:var(--text-2);
  white-space:pre-wrap;word-break:break-all;max-height:120px;overflow-y:auto;display:none;
}
.object-card.expanded .object-card-json{display:block}

/* Transfer Fetch / Error Row */
.transfer-fetch-row{
  margin-top:8px;padding-top:8px;border-top:1px solid var(--border);
  display:flex;justify-content:center;
}
.transfer-fetch-row .edr-btn{
  font-size:.72rem;padding:6px 16px;font-weight:600;
}
.transfer-error-row{
  margin-top:6px;padding:6px 8px;border-radius:4px;
  background:rgba(248,113,113,.08);border:1px solid rgba(248,113,113,.2);
  color:#F87171;font-size:.62rem;font-family:var(--mono);
  word-break:break-all;white-space:pre-wrap;max-height:80px;overflow-y:auto;
}

/* Status Badges */
.status-badge{
  display:inline-block;padding:1px 6px;border-radius:3px;font-size:.6rem;
  font-family:var(--mono);font-weight:600;letter-spacing:.5px;
}
.status-requested{color:var(--warning);background:rgba(251,191,36,.12);border:1px solid rgba(251,191,36,.25)}
.status-agreed,.status-verified{color:#60A5FA;background:rgba(96,165,250,.12);border:1px solid rgba(96,165,250,.25)}
.status-finalized,.status-completed{color:var(--success);background:rgba(52,211,153,.12);border:1px solid rgba(52,211,153,.25)}
.status-started{color:var(--provider);background:var(--provider-dim);border:1px solid rgba(56,189,248,.25)}
.status-terminated,.status-error{color:var(--danger);background:rgba(248,113,113,.12);border:1px solid rgba(248,113,113,.25)}

/* ── Catalog Cards ────────────────────────────────────────── */
.catalog-query-form{margin-bottom:14px}
.catalog-card{
  background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);
  padding:10px 12px;margin-bottom:6px;
}
.catalog-card-header{display:flex;align-items:center;gap:8px;cursor:pointer}
.catalog-card-chevron{width:12px;height:12px;fill:none;stroke:var(--muted);stroke-width:2;stroke-linecap:round;stroke-linejoin:round;transition:transform var(--transition)}
.catalog-card.open .catalog-card-chevron{transform:rotate(90deg)}
.catalog-card-name{font-weight:600;font-size:.78rem;color:var(--text)}
.catalog-card-id{font-family:var(--mono);font-size:.65rem;color:var(--muted)}
.catalog-card-body{display:none;margin-top:8px;padding-top:8px;border-top:1px solid var(--border)}
.catalog-card.open .catalog-card-body{display:block}
.catalog-card-detail{font-size:.68rem;color:var(--text-2);margin-bottom:4px}
.catalog-card-actions{margin-top:8px}

/* ── Communication Log ────────────────────────────────────── */
.comm-log{
  flex-shrink:0;display:flex;flex-direction:column;
  border-top:2px solid var(--border);background:#060910;
  height:var(--log-height);overflow:hidden;position:relative;
}
.comm-log.expanded{height:320px}
.comm-log.resizing{transition:none}
.comm-log:not(.resizing){transition:height .25s ease}
.comm-log-resize-handle{
  position:absolute;top:-4px;left:0;right:0;height:8px;
  cursor:ns-resize;z-index:10;
}
.comm-log-resize-handle::after{
  content:'';position:absolute;top:3px;left:50%;transform:translateX(-50%);
  width:40px;height:3px;border-radius:2px;background:var(--border-2);
  transition:background var(--transition);
}
.comm-log-resize-handle:hover::after,
.comm-log-resize-handle:active::after{background:var(--muted)}
.comm-log-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:0 16px;height:44px;flex-shrink:0;cursor:pointer;
  background:#080C14;border-bottom:1px solid var(--border);
}
.comm-log-title-area{display:flex;align-items:center;gap:10px}
.comm-log-title{font-size:.72rem;font-weight:700;color:var(--text-2);text-transform:uppercase;letter-spacing:1px}
.comm-log-count{
  font-size:.62rem;font-weight:700;color:var(--muted);
  background:var(--surface-2);padding:1px 6px;border-radius:8px;
}
.comm-log-actions{display:flex;align-items:center;gap:6px}
.comm-log-filter{display:flex;gap:0;border:1px solid var(--border);border-radius:var(--radius-xs);overflow:hidden}
.filter-btn{
  padding:3px 8px;border:none;background:transparent;color:var(--muted);
  font-size:.62rem;font-weight:600;cursor:pointer;transition:all var(--transition);
}
.filter-btn.active{background:var(--surface-2);color:var(--text)}
.filter-btn:hover{color:var(--text-2)}
.comm-log-toggle{
  width:28px;height:28px;border:none;background:transparent;color:var(--muted);
  cursor:pointer;display:flex;align-items:center;justify-content:center;transition:transform var(--transition);
}
.comm-log-toggle svg{width:14px;height:14px;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.comm-log.expanded .comm-log-toggle{transform:rotate(180deg)}
.comm-log-body{flex:1;overflow-y:auto;padding:0;min-height:0}
.comm-log-placeholder{
  height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:8px;color:var(--muted);
}
.comm-log-placeholder svg{width:32px;height:32px;fill:none;stroke:var(--muted);stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;opacity:.3}
.comm-log-placeholder p{font-size:.72rem}

@keyframes slideIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
.log-json{
  margin:0;padding:10px 12px;font-family:var(--mono);font-size:.68rem;
  color:var(--text-2);line-height:1.6;white-space:pre-wrap;word-break:break-all;
  background:#060910;overflow-x:auto;max-height:240px;overflow-y:auto;
}
.log-json .jk{color:#7DD3FC}
.log-json .js{color:#86EFAC}
.log-json .jn{color:#FCD34D}
.log-json .jb{color:#FCA5A5}
.log-json .jnull{color:#6B7280}

/* ── Landing Page ─────────────────────────────────────────── */
.edc-landing{
  flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:40px 20px;gap:36px;overflow-y:auto;
}
.edc-landing-title{font-size:1.1rem;font-weight:700;color:var(--text);letter-spacing:.3px;text-align:center}
.edc-landing-sub{font-size:.78rem;color:var(--muted);margin-top:4px;text-align:center}
.mode-cards{display:flex;gap:20px;flex-wrap:wrap;justify-content:center}
.mode-card{
  width:200px;height:220px;border-radius:12px;
  background:var(--surface);border:1px solid var(--border);
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:14px;
  cursor:pointer;transition:all var(--transition);position:relative;overflow:hidden;
}
.mode-card:hover:not(.disabled){border-color:var(--border-2);transform:translateY(-2px);box-shadow:var(--shadow-sm)}
.mode-card.disabled{opacity:.35;cursor:not-allowed;filter:grayscale(.8)}
.mode-card.active{border-color:rgba(56,189,248,.4)}
.mode-card.active:hover{border-color:var(--provider);box-shadow:0 0 20px rgba(56,189,248,.15)}
.mode-icon{width:64px;height:64px}
.mode-icon svg{width:100%;height:100%;fill:none;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round}
.mode-label{font-size:1rem;font-weight:700;color:var(--text)}
.mode-sub{font-size:.72rem;color:var(--muted)}
.mode-badge{
  position:absolute;top:10px;right:10px;
  font-size:.56rem;font-weight:700;text-transform:uppercase;letter-spacing:.8px;
  padding:2px 6px;border-radius:3px;
}
.mode-badge-tbd{background:var(--surface-2);color:var(--muted)}
.mode-badge-active{background:rgba(52,211,153,.12);color:var(--success)}
.info-cards{display:flex;gap:14px;flex-wrap:wrap;justify-content:center}
.info-card{
  display:flex;align-items:center;gap:10px;
  padding:14px 20px;border-radius:8px;
  background:var(--surface);border:1px solid var(--border);
  cursor:pointer;transition:all var(--transition);text-decoration:none;color:var(--text);
}
.info-card:hover{border-color:var(--border-2);background:var(--surface-2)}
.info-card svg{width:20px;height:20px;fill:none;stroke:var(--muted);stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0}
.info-card:hover svg{stroke:var(--text-2)}
.info-card-text{font-size:.78rem;font-weight:600}

/* ── Info Icons + Tooltips ────────────────────────────────── */
.info-icon{
  display:inline-flex;align-items:center;justify-content:center;
  width:14px;height:14px;border-radius:50%;
  border:1px solid var(--muted);color:var(--muted);
  font-size:.52rem;font-weight:700;font-style:italic;font-family:Georgia,serif;
  cursor:help;transition:all var(--transition);vertical-align:middle;margin-left:4px;
  flex-shrink:0;
}
.info-icon:hover{color:var(--text);border-color:var(--text-2)}
.info-tooltip{
  position:fixed;z-index:500;
  background:var(--surface-2);border:1px solid var(--border-2);border-radius:8px;
  padding:10px 14px;max-width:300px;font-size:.72rem;line-height:1.5;
  color:var(--text-2);box-shadow:var(--shadow-md);
  animation:fadeIn .15s ease;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
.info-tooltip code{
  font-family:var(--mono);font-size:.68rem;
  background:var(--bg);padding:1px 5px;border-radius:3px;color:var(--provider);
}
.info-tooltip .info-example{margin-top:6px;padding-top:6px;border-top:1px solid var(--border)}
.info-tooltip .info-example-label{font-size:.6rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted);margin-bottom:2px}

/* Example Load Button */
.example-load-btn{
  font-size:.62rem;color:var(--provider);cursor:pointer;
  background:none;border:none;padding:0;font-weight:600;
  transition:color var(--transition);
}
.example-load-btn:hover{color:#60CDFF;text-decoration:underline}

/* ── Protocol Progress Bar ────────────────────────────────── */
.protocol-progress{
  padding:12px 16px 8px;border-bottom:1px solid var(--border);flex-shrink:0;overflow-x:auto;
}
.progress-steps{display:flex;align-items:flex-start;gap:0;min-width:max-content}
.step-connector{width:24px;height:2px;background:var(--border-2);margin-top:13px;flex-shrink:0;transition:background .3s ease}
.step-connector.connector-done{background:var(--success)}
.step-node{display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;flex-shrink:0;transition:opacity var(--transition)}
.step-node:hover{opacity:.8}
.step-circle{
  width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;
  font-size:.68rem;font-weight:700;font-family:var(--mono);
  border:2px solid var(--border-2);background:var(--surface);color:var(--muted);transition:all .3s ease;
}
.step-label{font-size:.56rem;font-weight:600;color:var(--muted);text-align:center;max-width:72px;line-height:1.2;white-space:nowrap}
.step-completed .step-circle{background:rgba(52,211,153,.15);border-color:var(--success);color:var(--success)}
.step-completed .step-label{color:var(--success)}
.step-active .step-circle{background:rgba(56,189,248,.15);border-color:#38BDF8;color:#38BDF8;box-shadow:0 0 8px rgba(56,189,248,.3);animation:pulseGlow 2s infinite}
.step-active .step-label{color:var(--text)}
@keyframes pulseGlow{0%,100%{box-shadow:0 0 4px rgba(56,189,248,.2)}50%{box-shadow:0 0 12px rgba(56,189,248,.4)}}
.step-error .step-circle{background:rgba(248,113,113,.15);border-color:var(--danger);color:var(--danger)}
.step-error .step-label{color:var(--danger)}
.step-pending .step-circle{opacity:.5}

/* ── Phase Groups ────────────────────────────────────────── */
.phase-groups{display:flex;flex-direction:column;gap:0}
.phase-group{border-bottom:1px solid var(--border)}
.phase-group:last-child{border-bottom:none}
.phase-group-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 16px;cursor:pointer;transition:background var(--transition);user-select:none;
}
.phase-group-header:hover{background:rgba(255,255,255,.02)}
.phase-group-left{display:flex;align-items:center;gap:10px}
.phase-group-right{display:flex;align-items:center;gap:8px}
.phase-num{
  width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;
  font-size:.65rem;font-weight:700;font-family:var(--mono);
  border:2px solid var(--border-2);background:var(--surface);color:var(--text-2);flex-shrink:0;
}
.phase-done .phase-num{border-color:var(--success);color:var(--success);background:rgba(52,211,153,.1)}
.phase-error .phase-num{border-color:var(--danger);color:var(--danger);background:rgba(248,113,113,.1)}
.phase-active .phase-num{border-color:#38BDF8;color:#38BDF8;background:rgba(56,189,248,.1)}
.phase-num-debug{border-color:var(--muted);color:var(--muted);font-size:.55rem}
.phase-group-info{display:flex;flex-direction:column;gap:1px}
.phase-group-name{font-size:.75rem;font-weight:700;color:var(--text)}
.phase-group-desc{font-size:.6rem;color:var(--muted);line-height:1.3}
.phase-group-count{
  font-size:.58rem;font-weight:700;color:var(--muted);
  background:var(--surface-2);padding:1px 6px;border-radius:8px;font-family:var(--mono);
}
.phase-badge-done{font-size:.56rem;font-weight:700;padding:1px 6px;border-radius:3px;background:rgba(52,211,153,.12);color:var(--success);border:1px solid rgba(52,211,153,.25)}
.phase-badge-error{font-size:.56rem;font-weight:700;padding:1px 6px;border-radius:3px;background:rgba(248,113,113,.12);color:var(--danger);border:1px solid rgba(248,113,113,.25);animation:errorPulse 1.5s infinite}
@keyframes errorPulse{0%,100%{opacity:1}50%{opacity:.6}}
.phase-badge-pending{font-size:.56rem;font-weight:700;padding:1px 6px;border-radius:3px;background:rgba(255,255,255,.05);color:var(--muted)}
.phase-chevron{width:14px;height:14px;fill:none;stroke:var(--muted);stroke-width:2;stroke-linecap:round;stroke-linejoin:round;transition:transform var(--transition)}
.phase-group.collapsed .phase-chevron{transform:rotate(-90deg)}
.phase-entries{padding:0 16px 8px 50px;display:flex;flex-direction:column;gap:4px}
.phase-group.collapsed .phase-entries{display:none}
.phase-debug{opacity:.6}

/* ── Log Cards ───────────────────────────────────────────── */
.log-card{
  border-radius:var(--radius-sm);background:var(--surface);border:1px solid var(--border);
  overflow:hidden;transition:border-color var(--transition);animation:slideIn .2s ease;
}
.log-card:hover{border-color:var(--border-2)}
.log-card-error{border-color:rgba(248,113,113,.3);background:rgba(248,113,113,.03)}
.log-card-pending{border-color:rgba(251,191,36,.2);opacity:.8}
.log-card-main{display:flex}
.log-card-side-bar{width:3px;flex-shrink:0}
.log-card-content{flex:1;padding:6px 10px;min-width:0}
.log-card-top{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:2px}
.log-card-desc{font-size:.72rem;font-weight:600;color:var(--text);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.log-card-time{font-size:.58rem;color:var(--muted);font-family:var(--mono);flex-shrink:0}
.log-card-preview{font-size:.65rem;color:var(--text-2);margin-bottom:2px}
.log-card-preview code{font-family:var(--mono);font-size:.62rem;background:var(--bg);padding:0 4px;border-radius:2px;color:var(--provider)}
.preview-label{font-size:.58rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;margin-right:4px}
.preview-state{font-family:var(--mono);font-size:.62rem;font-weight:700;color:#38BDF8}
.log-card-bottom{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.log-card-side{font-size:.58rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}
.log-card-error-hint{font-size:.58rem;color:var(--danger);font-family:var(--mono);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}
.log-status-badge{font-family:var(--mono);font-size:.6rem;font-weight:700;padding:1px 5px;border-radius:3px}
.log-status-badge.s2xx{color:var(--success);background:rgba(52,211,153,.1)}
.log-status-badge.s4xx{color:var(--warning);background:rgba(251,191,36,.1)}
.log-status-badge.s5xx{color:var(--danger);background:rgba(248,113,113,.1)}
.log-status-badge.s-pending{color:var(--muted);background:rgba(255,255,255,.05)}
.log-status-badge.s0{color:var(--danger);background:rgba(248,113,113,.1)}
.log-dur{font-size:.58rem;color:var(--muted);font-family:var(--mono)}
.log-json-btn{
  margin-left:auto;padding:2px 8px;border:1px solid var(--border-2);border-radius:3px;
  background:transparent;color:var(--text-2);font-size:.58rem;font-weight:700;
  font-family:var(--mono);cursor:pointer;transition:all var(--transition);
}
.log-json-btn:hover{background:var(--surface-2);color:var(--text);border-color:var(--provider)}

/* Debug Toggle */
.comm-log-debug-toggle{display:flex;align-items:center;gap:4px}
.comm-log-debug-toggle.active{background:var(--surface-3);color:var(--text);border-color:var(--border-2)}

/* ── JSON Modal ──────────────────────────────────────────── */
.json-modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;
  display:flex;align-items:center;justify-content:center;
  animation:fadeIn .15s ease;
}
.json-modal{
  width:90%;max-width:720px;max-height:80vh;
  background:var(--bg);border:1px solid var(--border-2);border-radius:12px;
  display:flex;flex-direction:column;overflow:hidden;box-shadow:0 8px 32px rgba(0,0,0,.5);
}
.json-modal-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 18px;border-bottom:1px solid var(--border);flex-shrink:0;
}
.json-modal-title{font-size:.82rem;font-weight:700;color:var(--text)}
.json-modal-close{
  width:28px;height:28px;border:none;background:var(--surface);border-radius:var(--radius-xs);
  color:var(--muted);cursor:pointer;display:flex;align-items:center;justify-content:center;
  transition:all var(--transition);
}
.json-modal-close:hover{background:var(--surface-2);color:var(--text)}
.json-modal-close svg{width:14px;height:14px;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.json-modal-meta{
  padding:10px 18px;display:flex;align-items:center;gap:8px;flex-wrap:wrap;
  border-bottom:1px solid var(--border);flex-shrink:0;
}
.json-modal-meta span{font-size:.68rem}
.json-modal-body{flex:1;overflow-y:auto;padding:14px 18px}
.json-modal-section{margin-bottom:14px}
.json-modal-section-label{font-size:.62rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.8px;margin-bottom:6px}
.json-modal pre{
  margin:0;padding:12px 14px;font-family:var(--mono);font-size:.7rem;
  color:var(--text-2);line-height:1.6;white-space:pre-wrap;word-break:break-all;
  background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);
  max-height:300px;overflow-y:auto;
}
.json-modal-actions{
  display:flex;align-items:center;justify-content:flex-end;gap:8px;
  padding:12px 18px;border-top:1px solid var(--border);flex-shrink:0;
}

/* ── Toast ────────────────────────────────────────────────── */
.edc-toast{
  position:fixed;bottom:24px;left:50%;transform:translateX(-50%);
  padding:10px 20px;border-radius:var(--radius);font-size:.78rem;font-weight:600;
  background:var(--surface);color:var(--text);border:1px solid var(--border);
  box-shadow:var(--shadow-md);z-index:9999;animation:slideIn .2s ease;
}

/* ── Responsive ───────────────────────────────────────────── */
@media(max-width:768px){
  .split-container{grid-template-columns:1fr;grid-template-rows:1fr 1px 1fr}
  .split-divider{height:1px;width:100%}
  .edc-status-bar{flex-direction:column;gap:6px;padding:8px 16px}
  .status-bar-left{flex-wrap:wrap}
  .status-bar-sep{display:none}
  .mode-card{width:160px;height:180px}
  .mode-icon{width:48px;height:48px}
  .edc-landing{padding:24px 16px;gap:24px}
}

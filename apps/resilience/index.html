<!doctype html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resilience – Workspace</title>
  <link rel="stylesheet" href="/apps/resilience/styles.css?v=26" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>
  <header class="app-header">
    <a href="/dashboard" class="header-back-btn" title="Zurück zum Dashboard">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6"/></svg>
    </a>
    <div class="brand">
      <svg class="brand-icon" viewBox="0 0 24 24">
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
      </svg>
      <span id="brand-text">Resilience</span>
    </div>
    <div class="header-spacer"></div>
    <div id="global-import-status" class="global-import-status" hidden>
      <div class="global-import-bar-track"><div class="global-import-bar" id="global-import-bar"></div></div>
      <span id="global-import-text" class="global-import-text">0/0</span>
    </div>
    <div class="user-menu-wrap">
      <button id="user-menu-toggle" class="user-avatar-btn" type="button" aria-haspopup="true" aria-expanded="false">
        <span id="user-initials">--</span>
      </button>
      <div id="user-menu" class="user-menu" hidden>
        <div id="user-info" class="user-menu-info"></div>
        <div class="user-menu-section">
          <div class="locale-switch" role="radiogroup" aria-label="Sprache">
            <button id="locale-de-btn" class="locale-switch-btn active" type="button" role="radio" aria-checked="true">DE</button>
            <button id="locale-en-btn" class="locale-switch-btn" type="button" role="radio" aria-checked="false">EN</button>
          </div>
        </div>
        <button id="logout-btn" class="user-menu-item" type="button">Logout</button>
      </div>
    </div>
  </header>

  <div class="app-layout">
    <aside id="sidebar" class="sidebar" aria-label="Navigation">
      <nav id="sidebar-nav" class="sidebar-nav">
        <button class="sidebar-item active" data-page="dashboard" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <rect x="3" y="3" width="7" height="9" rx="1"/>
            <rect x="14" y="3" width="7" height="5" rx="1"/>
            <rect x="14" y="12" width="7" height="9" rx="1"/>
            <rect x="3" y="16" width="7" height="5" rx="1"/>
          </svg>
          <span class="sidebar-label">Dashboard</span>
        </button>

        <div class="sidebar-divider"></div>
        <div class="sidebar-section-title" data-i18n="sectionTools">Tools</div>
        <button class="sidebar-item" data-page="indicators" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
          </svg>
          <span class="sidebar-label">Indikatoren</span>
        </button>
        <button class="sidebar-item" data-page="gdacs" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <span class="sidebar-label">GDACS</span>
        </button>
        <button class="sidebar-item" data-page="ai-mapping" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 2l1.09 3.26L16 6l-2.18 1.74L14.54 11 12 9.27 9.46 11l.72-3.26L8 6l2.91-.74z"/>
            <path d="M5 15l.55 1.63L7 17.18 5.91 18.1l.36 1.63L5 19l-1.27.73.36-1.63L3 17.18l1.45-.55z"/>
            <path d="M19 15l.55 1.63L21 17.18l-1.09.92.36 1.63L19 19l-1.27.73.36-1.63L17 17.18l1.45-.55z"/>
          </svg>
          <span class="sidebar-label">AI Mapping</span>
        </button>
        <button class="sidebar-item" data-page="simulation" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          <span class="sidebar-label">Simulation</span>
        </button>

        <div class="sidebar-divider"></div>
        <div class="sidebar-section-title" data-i18n="sectionSources">Quellen &amp; Daten</div>
        <button class="sidebar-item" data-page="aas-data" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <ellipse cx="12" cy="5" rx="9" ry="3"/>
            <path d="M21 12c0 1.66-4.03 3-9 3s-9-1.34-9-3"/>
            <path d="M3 5v14c0 1.66 4.03 3 9 3s9-1.34 9-3V5"/>
          </svg>
          <span class="sidebar-label">AAS Daten</span>
        </button>
        <button class="sidebar-item" data-page="news-feeds" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="10"/>
            <line x1="2" y1="12" x2="22" y2="12"/>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
          </svg>
          <span class="sidebar-label">News Feeds</span>
        </button>
        <button class="sidebar-item" data-page="gdacs-alerts" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="10"/>
            <path d="M10.29 7.86L5.82 15.5a1 1 0 0 0 .86 1.5h8.64a1 1 0 0 0 .86-1.5L11.71 7.86a1 1 0 0 0-1.42 0z"/>
            <line x1="12" y1="10" x2="12" y2="12.5"/>
            <line x1="12" y1="14.5" x2="12.01" y2="14.5"/>
          </svg>
          <span class="sidebar-label">GDACS Alerts</span>
        </button>

        <div class="sidebar-spacer"></div>
        <button class="sidebar-item" data-page="settings" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
          <span class="sidebar-label">Einstellungen</span>
        </button>
        <button class="sidebar-item" data-page="docs" type="button">
          <svg class="sidebar-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
          <span class="sidebar-label">Dokumentation</span>
        </button>
      </nav>
      <div class="sidebar-foot">
        <button id="sidebar-toggle" class="sidebar-toggle-btn" type="button" title="Navigation einklappen">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M14 6l-6 6 6 6"/></svg>
        </button>
      </div>
    </aside>

    <main id="page-content" class="page-content">
      <!-- Dashboard Page -->
      <section id="page-dashboard" class="page-section active">
        <div class="page-inner">
          <div class="page-header">
            <h2 id="dashboard-title">Resilience Dashboard</h2>
            <p id="dashboard-desc">Übersicht der Resilienz-Tools für deine Lieferkette.</p>
          </div>
          <div class="dashboard-grid" id="dashboard-grid">
            <!-- News tile -->
            <div class="dash-card" id="dash-news">
              <div class="dash-card-header">
                <span class="dash-card-title" id="dash-news-title">Letzte News</span>
                <a href="#" class="dash-card-link" id="dash-news-link" data-nav="news-feeds">Alle anzeigen &rarr;</a>
              </div>
              <div class="dash-card-body" id="dash-news-body">
                <div class="dash-card-empty" id="dash-news-empty">Keine News vorhanden.</div>
              </div>
            </div>
            <!-- GDACS Alerts tile -->
            <div class="dash-card" id="dash-alerts">
              <div class="dash-card-header">
                <span class="dash-card-title" id="dash-alerts-title">GDACS Alerts</span>
                <a href="#" class="dash-card-link" id="dash-alerts-link" data-nav="gdacs-alerts">Alle anzeigen &rarr;</a>
              </div>
              <div class="dash-card-body" id="dash-alerts-body">
                <div class="dash-card-empty" id="dash-alerts-empty">Keine Alerts vorhanden.</div>
              </div>
            </div>
            <!-- Score tile -->
            <div class="dash-card" id="dash-score">
              <div class="dash-card-header">
                <span class="dash-card-title" id="dash-score-title">Score</span>
                <button id="dash-score-settings-btn" class="dash-aas-settings-btn" type="button" title="Einstellungen">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                </button>
              </div>
              <div class="dash-card-body" id="dash-score-body">
                <div class="dash-card-empty" id="dash-score-empty">Nicht konfiguriert.</div>
              </div>
            </div>
            <!-- Indicators tile -->
            <div class="dash-card dash-card-full" id="dash-indicators">
              <div class="dash-card-header">
                <span class="dash-card-title" id="dash-indicators-title">Indikatoren</span>
                <button id="dash-ind-settings-btn" class="dash-aas-settings-btn" type="button" title="Einstellungen">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                  </button>
              </div>
              <div class="dash-card-body" id="dash-indicators-body">
                <div class="dash-card-empty" id="dash-indicators-empty">Keine Indikatoren konfiguriert.</div>
              </div>
              <div class="dash-aas-footer" id="dash-ind-footer" hidden>
                <button class="dash-aas-page-btn" id="dash-ind-prev" type="button" disabled>&laquo;</button>
                <span class="dash-aas-page-info" id="dash-ind-page-info"></span>
                <button class="dash-aas-page-btn" id="dash-ind-next" type="button" disabled>&raquo;</button>
              </div>
            </div>
            <!-- AAS Country Overview tile (full width) -->
            <div class="dash-card dash-card-full" id="dash-aas-overview">
              <div class="dash-card-header">
                <span class="dash-card-title" id="dash-aas-title">Naturkatastrophen &amp; Lieferkettenrisiken</span>
                <div class="dash-card-actions">
                  <button id="dash-aas-map-btn" class="dash-aas-map-btn" type="button" title="Karte">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></svg>
                  </button>
                  <button id="dash-aas-settings-btn" class="dash-aas-settings-btn" type="button" title="Einstellungen">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                </button>
                </div>
              </div>
              <div class="dash-card-body" id="dash-aas-body">
                <div class="dash-card-empty" id="dash-aas-empty">Keine betroffenen Standorte erkannt.</div>
              </div>
              <div class="dash-aas-footer" id="dash-aas-footer" hidden>
                <button class="dash-aas-page-btn" id="dash-aas-prev" type="button" disabled>&laquo;</button>
                <span class="dash-aas-page-info" id="dash-aas-page-info"></span>
                <button class="dash-aas-page-btn" id="dash-aas-next" type="button" disabled>&raquo;</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Indicators Page -->
      <section id="page-indicators" class="page-section">
        <div class="page-inner page-inner-wide">
          <div class="page-header">
            <h2 id="indicators-title">Indikatoren</h2>
            <p id="indicators-desc">Definiere Resilienz-Indikatoren für deine Lieferkette.</p>
          </div>

          <div class="docs-layout">
            <nav class="docs-nav" id="ind-nav">
              <button class="docs-nav-item active" data-ind-nav="classes" id="ind-nav-btn-classes" type="button">Klassen</button>
              <button class="docs-nav-item" data-ind-nav="indicators" id="ind-nav-btn-indicators" type="button">Indikatoren</button>
            </nav>

            <div class="ind-nav-content">
              <!-- ═══ Classes Section ═══ -->
              <div id="ind-nav-classes">
                <div class="settings-card">
                  <h3 id="ind-classes-title">Indikator-Klassen</h3>

                  <div class="feed-add-row">
                    <input id="ind-class-input" class="feed-url-input" type="text" placeholder="Klasse eingeben…" />
                    <button id="ind-class-add-btn" class="btn btn-primary btn-sm" type="button">
                      <span id="ind-class-add-label">Hinzufügen</span>
                    </button>
                  </div>
                  <div id="ind-class-hint" class="settings-hint" hidden></div>

                  <div id="ind-class-list" class="feed-list"></div>
                  <div id="ind-class-list-empty" class="feed-list-empty" hidden>
                    <span id="ind-class-empty-label">Noch keine Klassen definiert.</span>
                  </div>
                </div>
              </div>

              <!-- ═══ Indicators Section ═══ -->
              <div id="ind-nav-indicators" hidden>

          <!-- List View -->
          <div id="ind-list-view">
            <div class="model-toolbar">
              <div class="model-search-wrap">
                <svg class="model-search-icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                <input id="ind-search" class="model-search" type="text" placeholder="Suchen…" />
              </div>
              <span id="ind-count" class="model-count"></span>
              <button id="ind-add-btn" class="btn btn-primary btn-sm-text" type="button">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5v14M5 12h14"/></svg>
                <span id="ind-add-label">Hinzufügen</span>
              </button>
            </div>
            <div class="model-table-wrap">
              <table class="model-table" id="ind-table">
                <thead>
                  <tr>
                    <th id="ind-th-name">Name</th>
                    <th id="ind-th-class">Klasse</th>
                    <th id="ind-th-rules">Regeln</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="ind-tbody"></tbody>
              </table>
            </div>
            <div id="ind-empty" class="model-empty" hidden>
              <p id="ind-empty-text">Noch keine Indikatoren definiert.</p>
            </div>
          </div>

          <!-- Detail / Edit View -->
          <div id="ind-detail-view" hidden>
            <button id="ind-back-btn" class="news-back-btn" type="button">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6"/></svg>
              <span id="ind-back-label">Zurück</span>
            </button>

            <div class="ind-form">
              <div class="ind-form-grid">
                <div class="ind-field">
                  <label id="ind-name-label" for="ind-name">Name</label>
                  <input id="ind-name" type="text" class="ind-input" placeholder="Indikator-Name" />
                </div>
                <div class="ind-field">
                  <label id="ind-class-label" for="ind-class-select">Klasse</label>
                  <select id="ind-class-select" class="settings-select"></select>
                </div>
              </div>

              <div class="ind-section">
                <h3 id="ind-groups-title">Regelgruppen</h3>
                <p id="ind-groups-desc" class="ind-section-desc">ODER-verknüpft — erste zutreffende Gruppe bestimmt die Ausgabe.</p>
              </div>
              <div id="ind-groups-container"></div>
              <button id="ind-add-group-btn" class="btn btn-secondary btn-sm-text ind-add-group-btn" type="button">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5v14M5 12h14"/></svg>
                <span id="ind-add-group-label">ODER-Gruppe hinzufügen</span>
              </button>

              <div class="ind-section">
                <h3 id="ind-default-title">Standard-Ausgabe</h3>
                <p id="ind-default-desc" class="ind-section-desc">Wird verwendet wenn keine Gruppe zutrifft.</p>
              </div>
              <div class="ind-default-row">
                <div class="ind-field-sm">
                  <label id="ind-default-label-label">Label</label>
                  <input id="ind-default-label" type="text" class="ind-input" />
                </div>
                <div class="ind-field-sm ind-field-color">
                  <label id="ind-default-color-label">Farbe</label>
                  <button id="ind-default-color" type="button" class="ind-color-swatch-btn" data-color="#9ca3af" style="background:#9ca3af"></button>
                  <input id="ind-default-color-hidden" type="hidden" value="#9ca3af" />
                </div>
                <div class="ind-field-sm">
                  <label id="ind-default-score-label">Score</label>
                  <input id="ind-default-score" type="number" class="ind-input ind-score-input" value="0" />
                </div>
              </div>

              <div id="ind-detail-hint" class="settings-hint" hidden></div>

              <div class="ind-actions">
                <button id="ind-delete-btn" class="btn btn-danger btn-sm" type="button" hidden>
                  <span id="ind-delete-label">Löschen</span>
                </button>
                <div class="settings-actions-spacer"></div>
                <button id="ind-save-btn" class="btn btn-primary" type="button">
                  <span id="ind-save-label">Speichern</span>
                </button>
              </div>
            </div>
          </div>

              </div><!-- /ind-nav-indicators -->
            </div><!-- /ind-nav-content -->
          </div><!-- /docs-layout -->
        </div>
      </section>

      <!-- GDACS Page -->
      <section id="page-gdacs" class="page-section">
        <div class="page-inner">
          <div class="page-header">
            <h2 id="gdacs-title">GDACS</h2>
            <p id="gdacs-desc">Naturkatastrophen-Daten vom <a href="https://www.gdacs.org" target="_blank" rel="noopener" class="inline-link" id="gdacs-link">Global Disaster Alert and Coordination System</a>.</p>
          </div>

          <!-- GDACS Search Card -->
          <div class="settings-card gdacs-search-card">
            <h3 id="gdacs-section-title">GDACS Naturkatastrophen</h3>

            <div class="gdacs-search-row">
              <div class="gdacs-field gdacs-field-country">
                <label id="gdacs-country-label" for="gdacs-country">Land</label>
                <input id="gdacs-country" type="text" class="gdacs-input" placeholder="z.B. Germany, Turkey…" />
              </div>
              <div class="gdacs-field">
                <label id="gdacs-days-label" for="gdacs-days">Zeitraum</label>
                <select id="gdacs-days" class="settings-select">
                  <option value="7">7 Tage</option>
                  <option value="14">14 Tage</option>
                  <option value="30" selected>30 Tage</option>
                  <option value="90">90 Tage</option>
                  <option value="365">1 Jahr</option>
                </select>
              </div>
            </div>

            <div class="gdacs-types" id="gdacs-types">
              <label><input type="checkbox" value="EQ" checked> <span data-gdacs-type="EQ">Erdbeben</span></label>
              <label><input type="checkbox" value="TC" checked> <span data-gdacs-type="TC">Sturm</span></label>
              <label><input type="checkbox" value="FL" checked> <span data-gdacs-type="FL">Flut</span></label>
              <label><input type="checkbox" value="VO" checked> <span data-gdacs-type="VO">Vulkan</span></label>
              <label><input type="checkbox" value="WF" checked> <span data-gdacs-type="WF">Waldbrand</span></label>
              <label><input type="checkbox" value="DR" checked> <span data-gdacs-type="DR">Dürre</span></label>
            </div>

            <div class="gdacs-actions-row">
              <div class="gdacs-field">
                <label id="gdacs-alert-label" for="gdacs-alert">Warnstufe</label>
                <select id="gdacs-alert" class="settings-select">
                  <option value="Green;Orange;Red" id="gdacs-alert-all">Alle</option>
                  <option value="Orange;Red" id="gdacs-alert-orange-red">Orange + Rot</option>
                  <option value="Red" id="gdacs-alert-red">Nur Rot</option>
                </select>
              </div>
              <button id="gdacs-search-btn" class="btn btn-primary btn-sm" type="button">
                <span id="gdacs-search-label">Suchen</span>
              </button>
            </div>
          </div>

          <!-- GDACS Results -->
          <div id="gdacs-results">
            <div id="gdacs-results-count" class="gdacs-results-count" hidden></div>
            <div id="gdacs-table-wrap" hidden>
              <table class="news-table gdacs-table">
                <thead>
                  <tr>
                    <th id="gdacs-th-type" class="gdacs-th-type">Typ</th>
                    <th id="gdacs-th-name">Ereignis</th>
                    <th id="gdacs-th-country">Land</th>
                    <th id="gdacs-th-alert">Warnstufe</th>
                    <th id="gdacs-th-severity" class="gdacs-th-severity">Schwere</th>
                    <th id="gdacs-th-date">Datum</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="gdacs-tbody"></tbody>
              </table>
            </div>
            <div id="gdacs-empty" class="news-empty" hidden>
              <p id="gdacs-empty-text">Keine Ereignisse gefunden.</p>
            </div>
            <div id="gdacs-error" class="settings-hint hint-error" hidden></div>
            <div id="gdacs-skeleton" hidden></div>
          </div>
        </div>
      </section>

      <!-- AI Mapping Page -->
      <section id="page-ai-mapping" class="page-section">
        <div class="page-inner">
          <div class="page-header">
            <h2 id="ai-mapping-title">AI Mapping</h2>
            <p id="ai-mapping-desc">KI-gestützte Zuordnung und Analyse.</p>
          </div>
        </div>
      </section>

      <!-- Simulation Page -->
      <section id="page-simulation" class="page-section">
        <div class="page-inner">
          <div class="page-header">
            <h2 id="simulation-title">Simulation</h2>
            <p id="simulation-desc">Szenarien simulieren und Auswirkungen analysieren.</p>
          </div>
        </div>
      </section>

      <!-- AAS Data Page -->
      <section id="page-aas-data" class="page-section">
        <div class="page-inner page-inner-wider">
          <div class="page-header">
            <h2 id="aas-data-title">AAS Daten</h2>
            <p id="aas-data-desc">Verwaltungsschalen-Daten zu Lieferanten, Produkten und Materialien.</p>
          </div>

          <div class="docs-layout">
            <!-- Internal Navigation -->
            <nav class="docs-nav" id="aas-data-nav">
              <button class="docs-nav-item active" data-aas-nav="overview" id="aas-nav-btn-overview" type="button">Übersicht</button>
              <button class="docs-nav-item" data-aas-nav="sources" id="aas-nav-btn-sources" type="button">Quellen</button>
              <button class="docs-nav-item" data-aas-nav="groups" id="aas-nav-btn-groups" type="button">Gruppen</button>
              <button class="docs-nav-item" data-aas-nav="assign" id="aas-nav-btn-assign" type="button">Zuordnung</button>
            </nav>

            <div class="aas-data-content">
              <!-- ═══ Overview Section ═══ -->
              <div id="aas-nav-overview">
                <!-- Overview List -->
                <div id="aas-overview-list">
                  <div class="model-toolbar">
                    <div class="model-search-wrap">
                      <svg class="model-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                      <input id="aas-ov-search" class="model-search" type="text" placeholder="Suchen…" data-i18n-placeholder="aasOvSearch" />
                    </div>
                    <button id="aas-ov-import-btn" class="aas-import-btn" type="button">
                      <svg viewBox="0 0 24 24" width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                      <span id="aas-ov-import-label">Import</span>
                    </button>
                    <button id="aas-ov-geocoding-btn" class="aas-import-btn" type="button">
                      <svg viewBox="0 0 24 24" width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                      <span id="aas-ov-geocoding-label">Geocoding</span>
                    </button>
                    <button id="aas-ov-process-btn" class="aas-import-btn" type="button">
                      <svg viewBox="0 0 24 24" width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v3m6.36-.64l-2.12 2.12M21 12h-3m.64 6.36l-2.12-2.12M12 21v-3m-6.36.64l2.12-2.12M3 12h3m-.64-6.36l2.12 2.12"/></svg>
                      <span id="aas-ov-process-label">Enrichment</span>
                    </button>
                    <span class="aas-ov-badge badge-total" id="aas-ov-badge-total">
                      <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a4 4 0 0 0-8 0v2"/></svg>
                      <span id="aas-ov-total-count">0</span> AAS
                    </span>
                    <span class="aas-ov-badge badge-geo" id="aas-ov-badge-geo">
                      <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                      <span id="aas-ov-geo-count">0</span> Geocoded
                    </span>
                  </div>
                  <div class="model-table-wrap">
                    <table class="model-table" id="aas-ov-table">
                      <thead>
                        <tr>
                          <th id="aas-ov-th-aasid">AAS ID</th>
                          <th></th>
                          <th id="aas-ov-th-source">Quelle</th>
                          <th id="aas-ov-th-group">Gruppe</th>
                          <th id="aas-ov-th-imported">Letzter Import</th>
                          <th class="aas-ov-geo-th" title="Import"><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg></th>
                          <th class="aas-ov-geo-th" title="Geocoding"><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg></th>
                          <th class="aas-ov-geo-th" title="Enrichment"><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v3m6.36-.64l-2.12 2.12M21 12h-3m.64 6.36l-2.12-2.12M12 21v-3m-6.36.64l2.12-2.12M3 12h3m-.64-6.36l2.12 2.12"/></svg></th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody id="aas-ov-tbody"></tbody>
                    </table>
                  </div>
                  <div id="aas-ov-empty" class="model-empty">Keine AAS IDs vorhanden. Füge Quellen und IDs hinzu.</div>
                  <div id="aas-ov-pagination" class="news-pagination"></div>
                </div>

                <!-- Overview Detail (Shell + Submodels) -->
                <div id="aas-overview-detail" hidden>
                  <button id="aas-ov-back-btn" class="news-back-btn" type="button">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
                    <span id="aas-ov-back-label">Zurück</span>
                  </button>

                  <!-- Progress Bar -->
                  <div class="aas-progress" id="aas-progress" hidden>
                    <div class="aas-progress-track"><div class="aas-progress-bar" id="aas-progress-bar"></div></div>
                    <span class="aas-progress-text" id="aas-progress-text">0/0</span>
                  </div>

                  <!-- Shell Info -->
                  <div id="aas-shell-info" class="aas-shell-card"></div>

                  <!-- Submodels Container -->
                  <div id="aas-submodels-container"></div>
                </div>
              </div>

              <!-- ═══ Sources Section ═══ -->
              <div id="aas-nav-sources" hidden>
                <!-- List View -->
                <div id="src-list-view">
                  <div class="model-toolbar">
                    <div class="model-search-wrap">
                      <svg class="model-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                      <input id="src-search" class="model-search" type="text" placeholder="Suchen…" data-i18n-placeholder="srcSearch" />
                    </div>
                    <span id="src-count" class="model-count"></span>
                    <button id="src-add-btn" class="btn btn-primary btn-sm-text" type="button">
                      <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                      <span id="src-add-label">Hinzufügen</span>
                    </button>
                  </div>
                  <div class="model-table-wrap">
                    <table class="model-table" id="src-table">
                      <thead>
                        <tr>
                          <th id="src-th-name">Name</th>
                          <th id="src-th-url">Basis-URL</th>
                          <th id="src-th-ids">IDs</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody id="src-tbody"></tbody>
                    </table>
                  </div>
                  <div id="src-empty" class="model-empty">Noch keine Quellen definiert.</div>
                  <div id="src-pagination" class="news-pagination"></div>
                </div>

                <!-- Detail / Edit View -->
                <div id="src-detail-view" hidden>
                  <button id="src-back-btn" class="news-back-btn" type="button">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
                    <span id="src-back-label">Zurück</span>
                  </button>

                  <div class="src-form">
                    <div class="src-form-grid">
                      <div class="ind-field">
                        <label id="src-lbl-name" for="src-name">Name</label>
                        <input id="src-name" class="ind-input" type="text" />
                      </div>
                      <div class="ind-field">
                        <label id="src-lbl-url" for="src-url">Basis-URL</label>
                        <input id="src-url" class="ind-input" type="url" placeholder="https://aas-server.example.com/api/v3.0" />
                      </div>
                    </div>

                    <!-- IDs Section with Tabs (hidden until source is saved) -->
                    <div id="src-ids-section" class="src-section" hidden>
                      <div class="src-tabs">
                        <button class="src-tab active" data-tab="all" id="src-tab-all">Alle</button>
                        <button class="src-tab" data-tab="aas" id="src-tab-aas">AAS IDs</button>
                        <button class="src-tab" data-tab="item" id="src-tab-item">Item IDs</button>
                      </div>
                      <div class="model-search-wrap" style="margin:0.5rem 0">
                        <svg class="model-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                        <input id="src-id-search" class="model-search" type="text" placeholder="Suchen…" data-i18n-placeholder="srcIdSearch" />
                      </div>

                      <!-- Tab: Alle -->
                      <div class="src-tab-content active" id="src-tab-content-all">
                        <ul id="src-id-list-all" class="src-id-list"></ul>
                        <div id="src-id-empty-all" class="src-id-empty">Noch keine IDs hinzugefügt.</div>
                        <div id="src-id-pag-all" class="news-pagination"></div>
                        <button id="src-delete-all-ids-btn" class="btn btn-danger btn-sm-text" type="button" hidden>
                          <svg viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/></svg>
                          <span id="src-delete-all-ids-label">Alle löschen</span>
                        </button>
                      </div>

                      <!-- Tab: AAS IDs -->
                      <div class="src-tab-content" id="src-tab-content-aas">
                        <div class="src-id-add-row">
                          <input id="src-aas-input" class="ind-input" type="text" placeholder="https://example.com/aas/Pump-001" />
                          <button id="src-aas-add-btn" class="btn btn-primary btn-sm-text" type="button">
                            <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                            <span id="src-aas-add-label">Hinzufügen</span>
                          </button>
                        </div>
                        <ul id="src-id-list-aas" class="src-id-list"></ul>
                        <div id="src-id-empty-aas" class="src-id-empty">Noch keine AAS IDs hinzugefügt.</div>
                        <div id="src-id-pag-aas" class="news-pagination"></div>
                      </div>

                      <!-- Tab: Item IDs -->
                      <div class="src-tab-content" id="src-tab-content-item">
                        <div class="ind-field" style="margin-bottom: 0.5rem;">
                          <label id="src-prefix-label" for="src-prefix-input">Prefix</label>
                          <input id="src-prefix-input" class="ind-input" type="text" placeholder="https://example.com/aas/" />
                        </div>
                        <div class="src-id-add-row">
                          <input id="src-item-input" class="ind-input" type="text" placeholder="Pump-001" />
                          <button id="src-item-add-btn" class="btn btn-primary btn-sm-text" type="button">
                            <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                            <span id="src-item-add-label">Hinzufügen</span>
                          </button>
                        </div>
                        <div class="src-id-add-row" style="margin-top: 0.4rem;">
                          <input id="src-import-url" class="ind-input" type="url" placeholder="https://api.example.com/item-ids" />
                          <button id="src-import-btn" class="btn btn-secondary btn-sm-text" type="button">
                            <svg viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                            <span id="src-import-label">Importieren</span>
                          </button>
                        </div>
                        <ul id="src-id-list-item" class="src-id-list"></ul>
                        <div id="src-id-empty-item" class="src-id-empty">Noch keine Item IDs hinzugefügt.</div>
                        <div id="src-id-pag-item" class="news-pagination"></div>
                      </div>

                      <div id="src-id-hint" class="settings-hint" hidden></div>
                    </div>

                    <!-- Available Endpoints (collapsible) -->
                    <div id="src-endpoints-section" class="src-section" hidden>
                      <button class="src-collapsible-header" id="src-endpoints-toggle" type="button">
                        <span id="src-endpoints-title">Verfügbare Endpunkte</span>
                        <svg class="src-collapsible-icon" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
                      </button>
                      <div class="src-collapsible-body" id="src-endpoints-body" hidden>
                        <ul class="src-endpoint-list">
                          <li><code>getShell</code> <span class="src-ep-params">(aasId)</span></li>
                          <li><code>getAssetInformation</code> <span class="src-ep-params">(aasId)</span></li>
                          <li><code>getSubmodelRefs</code> <span class="src-ep-params">(aasId)</span></li>
                          <li><code>getSubmodel</code> <span class="src-ep-params">(aasId, submodelId)</span></li>
                          <li><code>getSubmodelElement</code> <span class="src-ep-params">(submodelId, idShortPath)</span></li>
                          <li><code>getThumbnail</code> <span class="src-ep-params">(aasId)</span></li>
                          <li><code>getAttachment</code> <span class="src-ep-params">(submodelId, idShortPath)</span></li>
                        </ul>
                      </div>
                    </div>

                    <!-- Actions -->
                    <div class="ind-actions">
                      <button id="src-delete-btn" class="btn btn-danger" type="button" hidden>Löschen</button>
                      <button id="src-save-btn" class="btn btn-primary" type="button">Speichern</button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ═══ Gruppen (simple CRUD) ═══ -->
              <div id="aas-nav-groups" hidden>
                <!-- List -->
                <div id="grp-list-view">
                  <div class="model-toolbar">
                    <div class="model-search-wrap">
                      <svg class="model-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                      <input id="grp-search" class="model-search" type="text" placeholder="Gruppen suchen…" />
                    </div>
                    <span id="grp-count" class="model-count"></span>
                    <button id="grp-add-btn" class="btn btn-primary btn-sm-text" type="button">
                      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                      <span id="grp-add-label">Hinzufügen</span>
                    </button>
                  </div>
                  <div class="model-table-wrap">
                    <table class="model-table">
                      <thead><tr><th id="grp-th-name">Name</th><th id="grp-th-count">AAS IDs</th><th></th></tr></thead>
                      <tbody id="grp-tbody"></tbody>
                    </table>
                  </div>
                  <div id="grp-empty" class="news-empty" hidden><p id="grp-empty-text">Noch keine Gruppen vorhanden.</p></div>
                  <div id="grp-pagination" class="news-pagination"></div>
                </div>
                <!-- Detail -->
                <div id="grp-detail-view" hidden>
                  <button id="grp-back-btn" class="btn btn-ghost btn-sm-text" type="button" style="margin-bottom:0.75rem">
                    <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><polyline points="15 18 9 12 15 6"/></svg>
                    <span id="grp-back-label">Zurück</span>
                  </button>
                  <div class="ind-field" style="margin-bottom:1rem">
                    <label id="grp-name-label" for="grp-name-input">Name</label>
                    <input id="grp-name-input" class="ind-input" type="text" />
                  </div>
                  <div id="grp-hint" class="settings-hint" hidden></div>
                  <div class="grp-actions">
                    <button id="grp-save-btn" class="btn btn-primary btn-sm-text" type="button">
                      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                      <span id="grp-save-label">Speichern</span>
                    </button>
                    <button id="grp-delete-btn" class="btn btn-danger btn-sm-text" type="button" hidden>
                      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/></svg>
                      <span id="grp-delete-label">Löschen</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- ═══ Zuordnung (group picker + dual panel) ═══ -->
              <div id="aas-nav-assign" hidden>
                <div class="ind-field" style="margin-bottom:1rem">
                  <label id="assign-grp-label">Gruppe</label>
                  <select id="assign-grp-select" class="ind-input"></select>
                </div>
                <div id="assign-hint" class="settings-hint" hidden></div>

                <div id="assign-content" hidden>
                  <div class="grp-assign">
                    <!-- ── Available panel ── -->
                    <div class="grp-assign-panel">
                      <div class="grp-panel-header">
                        <div class="grp-panel-title" id="grp-avail-title">Verfügbar</div>
                        <select id="grp-source-filter" class="ind-input grp-source-select"></select>
                        <div class="model-search-wrap">
                          <svg class="model-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                          <input id="grp-avail-search" class="model-search" type="text" placeholder="Verfügbare suchen…" />
                        </div>
                      </div>
                      <div class="grp-panel-main">
                        <ul id="grp-avail-list" class="grp-id-list"></ul>
                        <div id="grp-avail-empty" class="grp-panel-empty" hidden>Keine verfügbaren AAS IDs.</div>
                      </div>
                      <div class="grp-panel-footer">
                        <button id="grp-add-all-btn" class="btn btn-secondary btn-sm-text" type="button">
                          <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><polyline points="13 17 18 12 13 7"/><polyline points="6 17 11 12 6 7"/></svg>
                          <span id="grp-add-all-label">Alle hinzufügen</span>
                        </button>
                        <div id="grp-avail-pag" class="news-pagination" style="margin:0"></div>
                      </div>
                    </div>
                    <!-- ── Assigned panel ── -->
                    <div class="grp-assign-panel">
                      <div class="grp-panel-header">
                        <div class="grp-panel-title" id="grp-assigned-title">Zugeordnet</div>
                        <div class="model-search-wrap">
                          <svg class="model-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                          <input id="grp-assigned-search" class="model-search" type="text" placeholder="Zugeordnete suchen…" />
                        </div>
                      </div>
                      <div class="grp-panel-main">
                        <ul id="grp-assigned-list" class="grp-id-list"></ul>
                        <div id="grp-assigned-empty" class="grp-panel-empty" hidden>Keine AAS IDs zugeordnet.</div>
                      </div>
                      <div class="grp-panel-footer">
                        <button id="grp-remove-all-btn" class="btn btn-danger btn-sm-text" type="button">
                          <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/></svg>
                          <span id="grp-remove-all-label">Alle entfernen</span>
                        </button>
                        <div id="grp-assigned-pag" class="news-pagination" style="margin:0"></div>
                      </div>
                    </div>
                  </div>

                  <div class="grp-actions">
                    <button id="assign-save-btn" class="btn btn-primary btn-sm-text" type="button">
                      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                      <span id="assign-save-label">Speichern</span>
                    </button>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </section>

      <!-- News Feeds Page -->
      <section id="page-news-feeds" class="page-section">
        <div class="page-inner">
          <div class="page-header">
            <div class="page-header-row">
              <div>
                <h2 id="news-feeds-title">News Feeds</h2>
                <p id="news-feeds-desc">Externe Nachrichten und Informationsquellen.</p>
              </div>
              <button id="news-refresh-btn" class="btn btn-secondary btn-sm" type="button">
                <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M23 4v6h-6"/><path d="M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
                <span id="news-refresh-label">Aktualisieren</span>
              </button>
            </div>
          </div>
          <!-- List View -->
          <div id="news-list-view">
            <div class="news-search-row">
              <input id="news-search-input" class="news-search-input" type="text" placeholder="News durchsuchen…" />
            </div>
            <div id="news-table-wrap">
              <table class="news-table" id="news-table">
                <thead>
                  <tr>
                    <th class="news-th-id" id="news-th-id">ID</th>
                    <th id="news-th-title">Titel</th>
                    <th id="news-th-stored">Gespeichert</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="news-tbody"></tbody>
              </table>
              <div id="news-empty" class="news-empty" hidden>
                <p id="news-empty-text">Keine News vorhanden. Füge Feeds in den Einstellungen hinzu.</p>
              </div>
            </div>
            <div id="news-pagination" class="news-pagination"></div>
          </div>

          <!-- Detail View -->
          <div id="news-detail-view" class="news-detail" hidden>
            <button id="news-back-btn" class="news-back-btn" type="button">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6"/></svg>
              <span id="news-back-label">Zurück</span>
            </button>
            <div id="news-detail-content" class="news-detail-body"></div>
          </div>
        </div>
      </section>

      <!-- GDACS Alerts Page -->
      <section id="page-gdacs-alerts" class="page-section">
        <div class="page-inner">
          <div class="page-header">
            <div class="page-header-row">
              <div>
                <h2 id="gdacs-alerts-title">GDACS Alerts</h2>
                <p id="gdacs-alerts-desc">Gespeicherte Naturkatastrophen-Meldungen für deine überwachten Länder.</p>
              </div>
              <button id="alerts-refresh-btn" class="btn btn-secondary btn-sm" type="button">
                <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M23 4v6h-6"/><path d="M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
                <span id="alerts-refresh-label">Aktualisieren</span>
              </button>
            </div>
          </div>
          <div id="alerts-content"></div>
          <div id="alerts-empty" class="news-empty" hidden>
            <p id="alerts-empty-text">Keine Alerts vorhanden. Füge Länder in den Einstellungen hinzu.</p>
          </div>
          <div id="alerts-pagination" class="news-pagination"></div>
        </div>
      </section>

      <!-- Settings Page -->
      <section id="page-settings" class="page-section">
        <div class="page-inner page-inner-wide">
          <div class="page-header">
            <h2 id="settings-title">Einstellungen</h2>
            <p id="settings-desc">Konfiguriere die Resilience-App.</p>
          </div>

          <div class="docs-layout">
            <nav class="docs-nav" id="settings-nav">
              <button class="docs-nav-item active" data-settings-nav="feeds" type="button" id="settings-nav-feeds-btn">News Feeds</button>
              <button class="docs-nav-item" data-settings-nav="gdacs" type="button" id="settings-nav-gdacs-btn">GDACS</button>
              <button class="docs-nav-item" data-settings-nav="aas-import" type="button" id="settings-nav-aas-btn">AAS Import</button>
              <button class="docs-nav-item" data-settings-nav="country-codes" type="button" id="settings-nav-cc-btn">Ländercodes</button>
              <button class="docs-nav-item" data-settings-nav="gdelt-bq" type="button" id="settings-nav-gdelt-btn">GDELT</button>
            </nav>

            <div class="settings-nav-content">
              <!-- ── Feeds Tab ── -->
              <div id="settings-nav-feeds">
                <div class="settings-card">
                  <h3 id="feed-section-title">News Feeds</h3>

                  <div class="feed-add-row">
                    <input id="feed-url-input" class="feed-url-input" type="url" placeholder="Feed-URL eingeben…" />
                    <button id="feed-add-btn" class="btn btn-primary btn-sm" type="button">
                      <span id="feed-add-label">Hinzufügen</span>
                    </button>
                  </div>
                  <div id="feed-hint" class="settings-hint" hidden></div>

                  <div id="feed-list" class="feed-list"></div>
                  <div id="feed-list-empty" class="feed-list-empty" hidden>
                    <span id="feed-empty-label">Noch keine Feeds konfiguriert.</span>
                  </div>

                  <div class="settings-row">
                    <label id="retention-label" for="retention-select">Aufbewahrung</label>
                    <select id="retention-select" class="settings-select">
                      <option value="7">7 Tage</option>
                      <option value="14">14 Tage</option>
                      <option value="30" selected>30 Tage</option>
                      <option value="60">60 Tage</option>
                      <option value="90">90 Tage</option>
                    </select>
                  </div>

                  <div class="settings-row">
                    <label id="refresh-label" for="refresh-select">Abruf-Intervall</label>
                    <select id="refresh-select" class="settings-select">
                      <option value="15">15 Min.</option>
                      <option value="30">30 Min.</option>
                      <option value="60" selected>1 Std.</option>
                      <option value="360">6 Std.</option>
                      <option value="1440">24 Std.</option>
                    </select>
                  </div>

                  <div class="settings-actions">
                    <button id="feed-purge-btn" class="btn btn-danger btn-sm" type="button">
                      <span id="feed-purge-label">Alle News löschen</span>
                    </button>
                    <div class="settings-actions-spacer"></div>
                    <button id="settings-save-btn" class="btn btn-primary" type="button">
                      <span id="settings-save-label">Speichern</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- ── GDACS Tab ── -->
              <div id="settings-nav-gdacs" hidden>
                <div class="settings-card">
                  <h3 id="gdacs-settings-title">GDACS Länderüberwachung</h3>

                  <div class="feed-add-row">
                    <input id="gdacs-country-input" class="feed-url-input" type="text" placeholder="Land eingeben…" />
                    <button id="gdacs-country-add-btn" class="btn btn-primary btn-sm" type="button">
                      <span id="gdacs-country-add-label">Hinzufügen</span>
                    </button>
                    <button id="gdacs-aas-fill-btn" class="btn btn-sm cm-io-btn cm-aas-import" type="button" title="Länder aus AAS-Zuordnungen übernehmen">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4.03 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4.03 3 9 3s9-1.34 9-3V5"/></svg>
                      <span id="gdacs-aas-fill-label">AAS</span>
                    </button>
                  </div>
                  <div id="gdacs-country-hint" class="settings-hint" hidden></div>

                  <div id="gdacs-country-list" class="feed-list"></div>
                  <div id="gdacs-country-list-empty" class="feed-list-empty" hidden>
                    <span id="gdacs-country-empty-label">Noch keine Länder konfiguriert.</span>
                  </div>

                  <div class="gdacs-threshold-section">
                    <label id="gdacs-threshold-label" class="gdacs-threshold-title">Matching-Radius (km)</label>
                    <div class="gdacs-threshold-grid">
                      <div class="gdacs-threshold-item">
                        <span class="gdacs-threshold-icon" title="Earthquake">🌍</span>
                        <span class="gdacs-threshold-type">EQ</span>
                        <input id="threshold-EQ" class="gdacs-threshold-input" type="number" min="10" max="5000" value="300" />
                        <span class="gdacs-threshold-unit">km</span>
                      </div>
                      <div class="gdacs-threshold-item">
                        <span class="gdacs-threshold-icon" title="Cyclone">🌀</span>
                        <span class="gdacs-threshold-type">TC</span>
                        <input id="threshold-TC" class="gdacs-threshold-input" type="number" min="10" max="5000" value="500" />
                        <span class="gdacs-threshold-unit">km</span>
                      </div>
                      <div class="gdacs-threshold-item">
                        <span class="gdacs-threshold-icon" title="Flood">🌊</span>
                        <span class="gdacs-threshold-type">FL</span>
                        <input id="threshold-FL" class="gdacs-threshold-input" type="number" min="10" max="5000" value="200" />
                        <span class="gdacs-threshold-unit">km</span>
                      </div>
                      <div class="gdacs-threshold-item">
                        <span class="gdacs-threshold-icon" title="Volcano">🌋</span>
                        <span class="gdacs-threshold-type">VO</span>
                        <input id="threshold-VO" class="gdacs-threshold-input" type="number" min="10" max="5000" value="100" />
                        <span class="gdacs-threshold-unit">km</span>
                      </div>
                      <div class="gdacs-threshold-item">
                        <span class="gdacs-threshold-icon" title="Wildfire">🔥</span>
                        <span class="gdacs-threshold-type">WF</span>
                        <input id="threshold-WF" class="gdacs-threshold-input" type="number" min="10" max="5000" value="150" />
                        <span class="gdacs-threshold-unit">km</span>
                      </div>
                      <div class="gdacs-threshold-item">
                        <span class="gdacs-threshold-icon" title="Drought">☀️</span>
                        <span class="gdacs-threshold-type">DR</span>
                        <input id="threshold-DR" class="gdacs-threshold-input" type="number" min="10" max="5000" value="1000" />
                        <span class="gdacs-threshold-unit">km</span>
                      </div>
                    </div>
                  </div>

                  <div class="settings-row">
                    <label id="gdacs-retention-label" for="gdacs-retention-select">Aufbewahrung</label>
                    <select id="gdacs-retention-select" class="settings-select">
                      <option value="7">7 Tage</option>
                      <option value="14">14 Tage</option>
                      <option value="30" selected>30 Tage</option>
                      <option value="60">60 Tage</option>
                      <option value="90">90 Tage</option>
                    </select>
                  </div>

                  <div class="settings-row">
                    <label id="gdacs-refresh-label" for="gdacs-refresh-select">Abruf-Intervall</label>
                    <select id="gdacs-refresh-select" class="settings-select">
                      <option value="15">15 Min.</option>
                      <option value="30">30 Min.</option>
                      <option value="60" selected>1 Std.</option>
                      <option value="360">6 Std.</option>
                      <option value="1440">24 Std.</option>
                    </select>
                  </div>

                  <div class="settings-actions">
                    <button id="gdacs-purge-btn" class="btn btn-danger btn-sm" type="button">
                      <span id="gdacs-purge-label">Alle Alerts löschen</span>
                    </button>
                    <div class="settings-actions-spacer"></div>
                    <button id="gdacs-settings-save-btn" class="btn btn-primary" type="button">
                      <span id="gdacs-settings-save-label">Speichern</span>
                    </button>
                  </div>
                </div>

              </div>

              <!-- ── AAS Import Tab ── -->
              <div id="settings-nav-aas-import" hidden>
                <div class="settings-card">
                  <h3 id="import-settings-title">AAS Import</h3>
                  <div class="settings-row">
                    <label id="import-interval-label" for="import-interval-select">Auto-Import Intervall</label>
                    <select id="import-interval-select" class="settings-select">
                      <option value="0">Aus</option>
                      <option value="6">6 Std.</option>
                      <option value="12">12 Std.</option>
                      <option value="24">24 Std.</option>
                    </select>
                  </div>
                  <div class="settings-actions">
                    <div class="settings-actions-spacer"></div>
                    <button id="import-settings-save-btn" class="btn btn-primary" type="button">
                      <span id="import-settings-save-label">Speichern</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- ── Country Codes Tab ── -->
              <div id="settings-nav-country-codes" hidden>
                <div class="model-toolbar">
                  <input id="cm-search-input" class="model-search" type="text" placeholder="Suchen…" />
                  <button id="cm-reset-btn" class="btn btn-danger btn-sm" type="button">
                    <span id="cm-reset-label">Zurücksetzen</span>
                  </button>
                  <button id="cm-import-btn" class="btn btn-sm cm-io-btn cm-import" type="button">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    <span id="cm-import-label">Import</span>
                  </button>
                  <button id="cm-export-btn" class="btn btn-sm cm-io-btn cm-export" type="button">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                    <span id="cm-export-label">Export</span>
                  </button>
                  <button id="cm-aas-import-btn" class="btn btn-sm cm-io-btn cm-aas-import" type="button">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4.03 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4.03 3 9 3s9-1.34 9-3V5"/></svg>
                    <span id="cm-aas-import-label">AAS</span>
                  </button>
                  <input type="file" id="cm-import-file" accept=".json" hidden />
                </div>

                <table class="model-table" id="cm-table">
                  <thead>
                    <tr>
                      <th class="cm-th-iso" id="cm-th-iso">Alpha-2</th>
                      <th class="cm-th-alpha3" id="cm-th-alpha3">Alpha-3</th>
                      <th class="cm-th-numeric" id="cm-th-numeric">Numeric</th>
                      <th id="cm-th-aas">AAS</th>
                      <th id="cm-th-gdacs">GDACS</th>
                    </tr>
                  </thead>
                  <tbody id="cm-tbody"></tbody>
                </table>

                <div id="cm-empty" class="model-empty" hidden>
                  <span id="cm-empty-label">Keine Einträge gefunden.</span>
                </div>

                <div class="news-pagination" id="cm-pagination">
                  <button class="btn btn-sm" id="cm-prev-btn" type="button" disabled>Zurück</button>
                  <span id="cm-page-info" class="news-page-info"></span>
                  <button class="btn btn-sm" id="cm-next-btn" type="button" disabled>Weiter</button>
                </div>
              </div>

              <!-- ── GDELT / BigQuery Tab ── -->
              <div id="settings-nav-gdelt-bq" hidden>
                <div class="settings-card">
                  <h3 id="gdelt-settings-title">GDELT / BigQuery</h3>
                  <p class="settings-desc" id="gdelt-settings-desc"></p>
                  <div class="settings-row" style="flex-direction:column;align-items:stretch;gap:0.4rem">
                    <label for="bq-sa-input" id="gdelt-sa-label">Service Account JSON</label>
                    <textarea id="bq-sa-input" class="feed-url-input" rows="6" style="font-family:var(--font-mono,monospace);font-size:0.75rem;resize:vertical"
                      placeholder='{"type":"service_account","project_id":"...","client_email":"...","private_key":"..."}'></textarea>
                  </div>
                  <div id="bq-sa-status" class="settings-hint" hidden></div>
                  <div class="settings-actions">
                    <div class="settings-actions-spacer"></div>
                    <button id="bq-sa-save-btn" class="btn btn-primary" type="button">
                      <span id="bq-sa-save-label">Speichern</span>
                    </button>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </div>
      </section>

      <!-- Docs Page -->
      <section id="page-docs" class="page-section">
        <div class="page-inner page-inner-wide">
          <div class="page-header">
            <h2 id="docs-title">Dokumentation</h2>
            <p id="docs-desc">Anleitungen und Informationen zu den Resilienz-Tools.</p>
          </div>
          <div class="docs-layout">
            <nav class="docs-nav" id="docs-nav">
              <button class="docs-nav-item active" data-doc="overview" type="button">Übersicht</button>
              <button class="docs-nav-item" data-doc="dashboard" type="button">Dashboard</button>
              <button class="docs-nav-item" data-doc="indicators" type="button">Indikatoren</button>
              <button class="docs-nav-item" data-doc="news-feeds" type="button">News Feeds</button>
              <button class="docs-nav-item" data-doc="gdacs-search" type="button">GDACS Suche</button>
              <button class="docs-nav-item" data-doc="gdacs-alerts" type="button">GDACS Alerts</button>
              <button class="docs-nav-item" data-doc="aas-data" type="button">AAS Daten</button>
              <button class="docs-nav-item" data-doc="geo-matching" type="button">Geo-Matching</button>
              <button class="docs-nav-item" data-doc="country-codes" type="button">Ländercodes</button>
              <button class="docs-nav-item" data-doc="settings" type="button">Einstellungen</button>
            </nav>
            <div class="docs-content" id="docs-content"></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Confirm dialog (country mappings reset) -->
  <dialog id="cm-confirm-modal" class="cm-confirm-modal">
    <form id="cm-confirm-form" method="dialog" class="cm-confirm-form">
      <h2 id="cm-confirm-title">Ländercodes zurücksetzen</h2>
      <p id="cm-confirm-message">Alle AAS- und GDACS-Zuordnungen werden auf die Standardwerte zurückgesetzt. Dieser Vorgang kann nicht rückgängig gemacht werden.</p>
      <div class="cm-confirm-actions">
        <button id="cm-confirm-cancel" class="btn btn-secondary" type="button">Abbrechen</button>
        <button id="cm-confirm-ok" class="btn btn-danger" type="submit" value="confirm">Zurücksetzen</button>
      </div>
    </form>
  </dialog>

  <!-- Single-AAS Geocoding Confirm -->
  <dialog id="geo-single-modal" class="geo-single-modal">
    <div class="geo-single-inner">
      <div class="geo-single-icon">
        <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
      </div>
      <h3 id="geo-single-title">Import &amp; Geocoding</h3>
      <p id="geo-single-desc">AAS-Daten werden neu importiert und geocodiert.</p>
      <div class="geo-single-aas-id" id="geo-single-aas-id"></div>
      <div class="geo-single-actions">
        <button id="geo-single-cancel" class="btn btn-secondary btn-sm" type="button">Abbrechen</button>
        <button id="geo-single-ok" class="btn btn-primary btn-sm" type="button">
          <span id="geo-single-ok-label">Starten</span>
        </button>
      </div>
    </div>
  </dialog>

  <!-- Single-AAS Import Confirm -->
  <dialog id="import-single-modal" class="geo-single-modal">
    <div class="geo-single-inner">
      <div class="geo-single-icon">
        <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      </div>
      <h3 id="import-single-title">Erneut importieren?</h3>
      <p id="import-single-desc">Alle gespeicherten Daten dieser AAS werden gel&ouml;scht und neu importiert. Geocoding muss danach erneut durchgef&uuml;hrt werden.</p>
      <div class="geo-single-aas-id" id="import-single-aas-id"></div>
      <div class="geo-single-actions">
        <button id="import-single-cancel" class="btn btn-secondary btn-sm" type="button">Abbrechen</button>
        <button id="import-single-ok" class="btn btn-primary btn-sm" type="button">
          <span id="import-single-ok-label">Importieren</span>
        </button>
      </div>
    </div>
  </dialog>

  <!-- World Map Modal -->
  <dialog id="map-modal" class="map-modal">
    <div class="map-modal-inner">
      <div class="map-modal-header">
        <h3 id="map-modal-title">Weltkarte</h3>
        <div class="map-header-stats">
          <span class="map-stat" id="map-stat-alerts">
            <svg viewBox="0 0 24 24" width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
            <span id="map-stat-alerts-count">0</span>
          </span>
          <span class="map-stat" id="map-stat-aas">
            <svg viewBox="0 0 24 24" width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            <span id="map-stat-aas-count">0</span>
          </span>
        </div>
        <div class="map-header-spacer"></div>
        <button id="map-filter-btn" class="map-filter-btn" type="button" title="Nur Matches">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
          <span id="map-filter-label">Nur Matches</span>
        </button>
        <button id="map-dist-btn" class="map-filter-btn active" type="button">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
          <span id="map-dist-label">km</span>
        </button>
        <button id="map-modal-close" class="map-modal-close-btn" type="button">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="map-modal-body">
        <div id="map-container" class="map-container"></div>
      </div>
    </div>
  </dialog>

  <!-- AAS Country Import Modal -->
  <dialog id="aas-cm-modal" class="aas-cm-modal">
    <div class="aas-cm-inner">
      <div class="aas-cm-header">
        <h2 id="aas-cm-title">AAS Länder-Import</h2>
        <div class="aas-cm-steps" id="aas-cm-steps">
          <span class="aas-cm-step active" data-step="1">1</span>
          <span class="aas-cm-step-line"></span>
          <span class="aas-cm-step" data-step="2">2</span>
          <span class="aas-cm-step-line"></span>
          <span class="aas-cm-step" data-step="3">3</span>
          <span class="aas-cm-step-line"></span>
          <span class="aas-cm-step" data-step="4">4</span>
        </div>
        <button id="aas-cm-close" class="aas-cm-close-btn" type="button">&times;</button>
      </div>

      <!-- Step 1: Group -->
      <div class="aas-cm-body" id="aas-cm-step-1">
        <p id="aas-cm-step1-desc" class="aas-cm-desc">Wähle eine AAS-Gruppe aus.</p>
        <div id="aas-cm-group-list" class="aas-cm-select-list"></div>
        <div id="aas-cm-group-empty" class="aas-cm-empty" hidden>Keine Gruppen vorhanden.</div>
      </div>

      <!-- Step 2: AAS -->
      <div class="aas-cm-body" id="aas-cm-step-2" hidden>
        <p id="aas-cm-step2-desc" class="aas-cm-desc">Wähle eine AAS aus der Gruppe.</p>
        <div id="aas-cm-aas-list" class="aas-cm-select-list"></div>
        <div id="aas-cm-aas-empty" class="aas-cm-empty" hidden>Keine AAS in dieser Gruppe.</div>
      </div>

      <!-- Step 3: Tree -->
      <div class="aas-cm-body" id="aas-cm-step-3" hidden>
        <p id="aas-cm-step3-desc" class="aas-cm-desc">Navigiere im Baum und klicke auf eine Property.</p>
        <div id="aas-cm-selected-path" class="aas-cm-selected-path" hidden></div>
        <div id="aas-cm-tree-loading" class="aas-cm-loading" hidden>Laden…</div>
        <div id="aas-cm-tree" class="aas-cm-tree"></div>
      </div>

      <!-- Step 4: Processing + Results -->
      <div class="aas-cm-body" id="aas-cm-step-4" hidden>
        <div id="aas-cm-processing" class="aas-cm-processing">
          <div class="aas-cm-proc-step">
            <span class="aas-cm-proc-icon" id="aas-cm-proc-1-icon">&#9675;</span>
            <span id="aas-cm-proc-1-label">Schritt 1: Direkte Zuordnung</span>
            <span class="aas-cm-proc-count" id="aas-cm-proc-1-count"></span>
          </div>
          <div class="aas-cm-proc-step">
            <span class="aas-cm-proc-icon" id="aas-cm-proc-2-icon">&#9675;</span>
            <span id="aas-cm-proc-2-label">Schritt 2: KI-Zuordnung</span>
            <span class="aas-cm-proc-count" id="aas-cm-proc-2-count"></span>
          </div>
        </div>
        <div id="aas-cm-results" hidden>
          <div class="aas-cm-result-summary" id="aas-cm-summary"></div>
          <div class="aas-cm-result-table-wrap">
            <table class="aas-cm-result-table">
              <thead>
                <tr>
                  <th id="aas-cm-th-value">Wert</th>
                  <th id="aas-cm-th-match">Zuordnung</th>
                  <th id="aas-cm-th-method">Methode</th>
                </tr>
              </thead>
              <tbody id="aas-cm-result-tbody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Success screen -->
      <div class="aas-cm-body aas-cm-success" id="aas-cm-success" hidden>
        <div class="aas-cm-success-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="9 12 11.5 14.5 16 9"/></svg>
        </div>
        <h3 id="aas-cm-success-title" class="aas-cm-success-title">Zuordnungen erfolgreich übernommen.</h3>
        <p id="aas-cm-success-detail" class="aas-cm-success-detail"></p>
      </div>

      <div class="aas-cm-footer">
        <button id="aas-cm-back-btn" class="btn btn-secondary btn-sm" type="button" hidden>Zurück</button>
        <button id="aas-cm-skip-btn" class="btn btn-secondary btn-sm" type="button" hidden>Überspringen</button>
        <div class="aas-cm-footer-spacer"></div>
        <button id="aas-cm-cancel-btn" class="btn btn-secondary btn-sm" type="button">Abbrechen</button>
        <button id="aas-cm-apply-btn" class="btn btn-primary btn-sm" type="button" hidden>Übernehmen</button>
      </div>
    </div>
  </dialog>

  <!-- Dashboard AAS Tile Settings Modal -->
  <dialog id="dash-aas-settings-modal" class="dash-aas-settings-modal">
    <div class="dash-aas-settings-inner">
      <div class="dash-aas-settings-header">
        <h3 id="dash-aas-settings-title">Kachel-Einstellungen</h3>
        <button id="dash-aas-settings-close" class="aas-cm-close-btn" type="button">&times;</button>
      </div>
      <div class="dash-aas-settings-body">
        <div class="dash-settings-section">
          <label id="gdacs-matching-label">Matching-Parameter</label>
          <div class="gdacs-matching-display">
            <div class="gdacs-matching-paths" id="gdacs-matching-paths">
              <span class="gdacs-aas-source-empty" id="gdacs-matching-text">Nicht konfiguriert</span>
            </div>
            <button id="gdacs-matching-btn" class="btn btn-sm cm-io-btn" type="button">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
              <span id="gdacs-matching-btn-label">Konfigurieren</span>
            </button>
          </div>
        </div>
        <div id="dash-aas-extra-sections" hidden>
          <div class="dash-settings-section">
            <label id="dash-aas-filter-label">Match-Qualit&auml;t anzeigen</label>
            <div class="dash-aas-filter-checks">
              <label><input type="checkbox" id="dash-filter-polygon" checked> <span style="color:#059669">&#9679;</span> <span id="dash-aas-filter-polygon-label">Polygon</span></label>
              <label><input type="checkbox" id="dash-filter-distance" checked> <span style="color:#d97706">&#9679;</span> <span id="dash-aas-filter-distance-label">Distanz</span></label>
              <label><input type="checkbox" id="dash-filter-country"> <span style="color:#9ca3af">&#9679;</span> <span id="dash-aas-filter-country-label">Land</span></label>
            </div>
          </div>
          <div class="dash-settings-section">
            <label id="dash-aas-cols-label">Spaltenauswahl</label>
            <div class="gdacs-aas-source-row">
              <div class="gdacs-aas-source-display" id="dash-aas-cols-display">
                <span id="dash-aas-cols-text" class="gdacs-aas-source-empty">Nicht konfiguriert</span>
              </div>
              <button id="dash-aas-cols-btn" class="btn btn-sm cm-io-btn" type="button">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
                <span id="dash-aas-cols-btn-label">Spalten w&auml;hlen</span>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="dash-aas-settings-footer">
        <button id="dash-aas-settings-save" class="btn btn-primary btn-sm" type="button">Speichern</button>
        <button id="dash-aas-settings-delete" class="btn btn-sm btn-danger-outline" type="button" hidden>L&ouml;schen</button>
      </div>
    </div>
  </dialog>

  <!-- Company Detail Modal -->
  <dialog id="company-detail-modal" class="company-detail-modal">
    <div class="cd-modal-inner">
      <div class="cd-modal-header">
        <div class="cd-header-info">
          <h3 id="cd-modal-title" class="cd-modal-title"></h3>
          <span id="cd-modal-aas-id" class="cd-modal-aas-id"></span>
        </div>
        <button id="cd-modal-close" class="map-modal-close-btn" type="button">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="cd-modal-layout">
        <nav class="cd-sidebar" id="cd-sidebar" aria-label="Tabs">
          <button class="cd-sidebar-btn active" data-cd-tab="location" type="button" id="cd-tab-location">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            <span class="cd-sidebar-tooltip" id="cd-tab-location-tip"></span>
          </button>
          <button class="cd-sidebar-btn" data-cd-tab="alerts" type="button" id="cd-tab-alerts">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8V6Z"/></svg>
            <span class="cd-sidebar-tooltip" id="cd-tab-alerts-tip"></span>
          </button>
          <button class="cd-sidebar-btn" data-cd-tab="gdelt" type="button" id="cd-tab-gdelt">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>
            <span class="cd-sidebar-tooltip" id="cd-tab-gdelt-tip"></span>
          </button>
          <button class="cd-sidebar-btn" data-cd-tab="worldbank" type="button" id="cd-tab-worldbank">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="12" width="4" height="9" rx="1"/><rect x="10" y="7" width="4" height="14" rx="1"/><rect x="17" y="3" width="4" height="18" rx="1"/></svg>
            <span class="cd-sidebar-tooltip" id="cd-tab-worldbank-tip"></span>
          </button>
          <button class="cd-sidebar-btn" data-cd-tab="inform" type="button" id="cd-tab-inform">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
            <span class="cd-sidebar-tooltip" id="cd-tab-inform-tip"></span>
          </button>
        </nav>
        <div class="cd-modal-body" id="cd-modal-body">
          <div class="cd-page" id="cd-page-location"></div>
          <div class="cd-page" id="cd-page-alerts" hidden></div>
          <div class="cd-page" id="cd-page-gdelt" hidden></div>
          <div class="cd-page" id="cd-page-worldbank" hidden></div>
          <div class="cd-page" id="cd-page-inform" hidden></div>
        </div>
      </div>
    </div>
  </dialog>

  <!-- Indicator Dashboard Settings Modal -->
  <dialog id="dash-ind-settings-modal" class="dash-aas-settings-modal">
    <div class="dash-aas-settings-inner">
      <div class="dash-aas-settings-header">
        <h3 id="dash-ind-settings-title">Indikator-Kachel</h3>
        <button id="dash-ind-settings-close" class="aas-cm-close-btn" type="button">&times;</button>
      </div>
      <div class="dash-aas-settings-body">
        <div id="dash-ind-config-display" class="dash-ind-config-display">
          <span class="gdacs-aas-source-empty" id="dash-ind-config-text">Nicht konfiguriert</span>
        </div>
        <div class="dash-settings-section" id="dash-ind-cols-section" hidden>
          <label id="dash-ind-cols-label">Spaltenauswahl</label>
          <div class="gdacs-aas-source-row">
            <div class="gdacs-aas-source-display" id="dash-ind-cols-display">
              <span id="dash-ind-cols-text" class="gdacs-aas-source-empty">Nicht konfiguriert</span>
            </div>
            <button id="dash-ind-cols-btn" class="btn btn-sm cm-io-btn" type="button">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
              <span id="dash-ind-cols-btn-label">Spalten w&auml;hlen</span>
            </button>
          </div>
        </div>
      </div>
      <div class="dash-aas-settings-footer dash-ind-settings-footer">
        <button id="dash-ind-configure-btn" class="btn btn-primary btn-sm" type="button">Konfigurieren</button>
        <button id="dash-ind-delete-btn" class="btn btn-sm btn-danger-outline" type="button">Alle l&ouml;schen</button>
      </div>
    </div>
  </dialog>

  <!-- Indicator Wizard Modal -->
  <dialog id="ind-wizard-modal" class="aas-cm-modal">
    <div class="aas-cm-inner">
      <div class="aas-cm-header">
        <h2 id="ind-wizard-title">Indikatoren konfigurieren</h2>
        <div class="aas-cm-steps" id="ind-wizard-steps">
          <span class="aas-cm-step active" data-step="1">1</span>
          <span class="aas-cm-step-line"></span>
          <span class="aas-cm-step" data-step="2">2</span>
          <span class="aas-cm-step-line"></span>
          <span class="aas-cm-step" data-step="3">3</span>
          <span class="aas-cm-step-line"></span>
          <span class="aas-cm-step" data-step="4">4</span>
        </div>
        <button id="ind-wizard-close" class="aas-cm-close-btn" type="button">&times;</button>
      </div>
      <!-- Step 1: Gruppe wählen -->
      <div class="aas-cm-body" id="ind-wizard-step-1">
        <p class="aas-cm-step-desc" id="ind-wizard-step1-desc">Wähle die AAS-Gruppe für die Auswertung</p>
        <div id="ind-wizard-group-list" class="aas-cm-select-list"></div>
        <div id="ind-wizard-group-empty" class="aas-cm-empty" hidden>Keine Gruppen vorhanden</div>
      </div>
      <!-- Step 2: Indikatoren wählen -->
      <div class="aas-cm-body" id="ind-wizard-step-2" hidden>
        <p class="aas-cm-step-desc" id="ind-wizard-step2-desc">Wähle die Indikatoren die ausgewertet werden sollen</p>
        <div id="ind-wizard-indicator-list" class="ind-wizard-checkbox-list"></div>
        <div id="ind-wizard-indicator-empty" class="aas-cm-empty" hidden>Keine Indikatoren definiert</div>
      </div>
      <!-- Step 3: Mapping pro Indikator -->
      <div class="aas-cm-body" id="ind-wizard-step-3" hidden>
        <div class="ind-wizard-mapping-header">
          <span id="ind-wizard-mapping-name"></span>
          <span id="ind-wizard-mapping-progress" class="ind-wizard-mapping-progress"></span>
        </div>
        <p class="aas-cm-step-desc" id="ind-wizard-step3-desc">Ordne jedem Input-Typ einen AAS-Pfad zu</p>
        <!-- Sub-step 3a: AAS item selection -->
        <div id="ind-wizard-aas-select" hidden>
          <p class="aas-cm-step-desc" id="ind-wizard-step3a-desc">Wähle ein Referenz-AAS-Item</p>
          <div id="ind-wizard-aas-list" class="aas-cm-select-list"></div>
        </div>
        <!-- Sub-step 3b: Input mapping via tree -->
        <div id="ind-wizard-input-mapping" hidden>
          <div id="ind-wizard-input-rows"></div>
          <div id="ind-wizard-tree-area" hidden>
            <p id="ind-wizard-tree-label" class="ind-wizard-tree-label"></p>
            <div id="ind-wizard-tree-loading" class="aas-cm-loading" hidden></div>
            <div id="ind-wizard-tree" class="aas-cm-tree"></div>
          </div>
        </div>
      </div>
      <!-- Step 4: Zusammenfassung -->
      <div class="aas-cm-body" id="ind-wizard-step-4" hidden>
        <div id="ind-wizard-summary" class="ind-wizard-summary"></div>
        <div id="ind-wizard-success" class="aas-cm-success" hidden>
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="9 12 11.5 14.5 16 9.5"/></svg>
          <p id="ind-wizard-success-text">Konfiguration gespeichert</p>
        </div>
      </div>
      <div class="aas-cm-footer">
        <button id="ind-wizard-back-btn" class="btn btn-sm" type="button" hidden>Zur&uuml;ck</button>
        <span class="aas-cm-footer-spacer"></span>
        <button id="ind-wizard-cancel-btn" class="btn btn-sm" type="button">Abbrechen</button>
        <button id="ind-wizard-next-btn" class="btn btn-primary btn-sm" type="button" hidden>Weiter</button>
        <button id="ind-wizard-save-btn" class="btn btn-primary btn-sm" type="button" hidden>Speichern</button>
      </div>
    </div>
  </dialog>

  <!-- Indicator Confirm Dialog -->
  <dialog id="ind-confirm-dialog" class="ind-confirm-dialog">
    <div class="ind-confirm-inner">
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
      <p id="ind-confirm-text">Alle Indikator-Konfigurationen l&ouml;schen?</p>
      <div class="ind-confirm-actions">
        <button id="ind-confirm-cancel" class="btn btn-sm" type="button">Abbrechen</button>
        <button id="ind-confirm-ok" class="btn btn-sm btn-danger" type="button">L&ouml;schen</button>
      </div>
    </div>
  </dialog>

  <!-- Indicator Detail Modal -->
  <dialog id="ind-detail-modal" class="company-detail-modal ind-detail-modal">
    <div class="cd-modal-inner">
      <div class="cd-modal-header">
        <div class="cd-header-info">
          <h3 id="ind-detail-title" class="cd-modal-title"></h3>
          <span id="ind-detail-aas-id" class="cd-modal-aas-id"></span>
        </div>
        <button id="ind-detail-close" class="map-modal-close-btn" type="button">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="ind-detail-body" id="ind-detail-body"></div>
    </div>
  </dialog>

  <!-- Score Settings Modal -->
  <dialog id="dash-score-settings-modal" class="dash-aas-settings-modal dash-score-settings-modal">
    <div class="dash-aas-settings-inner">
      <div class="dash-aas-settings-header">
        <h3 id="dash-score-settings-title">Score-Kachel</h3>
        <button id="dash-score-settings-close" class="aas-cm-close-btn" type="button">&times;</button>
      </div>
      <div class="dash-aas-settings-body" id="dash-score-settings-body">
        <div id="score-cfg-display"></div>
        <div id="score-step-1" hidden>
          <p class="aas-cm-desc" id="score-step-1-desc">W&auml;hle eine AAS-Gruppe.</p>
          <div id="score-group-list" class="aas-cm-select-list"></div>
        </div>
        <div id="score-step-2" hidden>
          <p class="aas-cm-desc" id="score-step-2-desc">W&auml;hle AAS-Items aus.</p>
          <div id="score-aas-list" class="score-checkbox-list"></div>
        </div>
        <div id="score-step-3" hidden>
          <p class="aas-cm-desc" id="score-step-3-desc">W&auml;hle Pfade f&uuml;r Benennung und Vergleichswert.</p>
          <div id="score-path-rows"></div>
          <div id="score-tree-area" hidden>
            <p class="aas-cm-desc" id="score-tree-label"></p>
            <div id="score-tree-loading" class="aas-cm-loading" hidden>Laden&hellip;</div>
            <div id="score-tree" class="aas-cm-tree"></div>
          </div>
        </div>
      </div>
      <div class="dash-aas-settings-footer score-settings-footer">
        <button id="score-cfg-configure-btn" class="btn btn-primary btn-sm" type="button">Konfigurieren</button>
        <button id="score-cfg-back-btn" class="btn btn-sm" type="button" hidden>Zur&uuml;ck</button>
        <button id="score-cfg-next-btn" class="btn btn-primary btn-sm" type="button" hidden>Weiter</button>
        <button id="score-cfg-save-btn" class="btn btn-primary btn-sm" type="button" hidden>&Uuml;bernehmen</button>
        <button id="score-cfg-delete-btn" class="btn btn-sm btn-danger-outline" type="button" hidden>L&ouml;schen</button>
      </div>
    </div>
  </dialog>

  <!-- Chat Widget -->
  <div id="chat-widget-area" class="chat-widget-area" hidden>
    <button id="chat-widget-toggle" class="chat-widget-toggle" type="button" title="AI Assistant">
      <svg viewBox="0 0 24 24" class="chat-widget-icon"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
      <svg viewBox="0 0 24 24" class="chat-widget-icon-close"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
    </button>

    <div id="chat-widget" class="chat-widget" hidden>
      <div class="chat-widget-header">
        <span class="chat-widget-title">AI Assistant</span>
        <div class="chat-widget-header-actions">
          <span id="chat-widget-connector-tag" class="chat-widget-connector-tag" hidden></span>
          <button id="chat-widget-clear" class="chat-widget-clear" type="button" title="Chat leeren">
            <svg viewBox="0 0 24 24" width="16" height="16"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
          </button>
        </div>
      </div>
      <div id="chat-widget-messages" class="chat-widget-messages"></div>
      <div id="cw-slash-menu" class="cw-slash-menu" hidden></div>
      <form id="chat-widget-form" class="chat-widget-form">
        <button id="cw-mode-toggle" class="cw-mode-toggle" type="button" title="MCP / WEB">
          <svg viewBox="0 0 24 24" class="cw-mode-icon-tools"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
          <svg viewBox="0 0 24 24" class="cw-mode-icon-web"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
          <span id="cw-mode-label" class="cw-mode-label">MCP</span>
        </button>
        <textarea id="chat-widget-input" class="chat-widget-input" rows="1" placeholder="Nachricht..." maxlength="10000"></textarea>
        <button type="submit" id="chat-widget-send" class="chat-widget-send" disabled>
          <svg viewBox="0 0 24 24" width="16" height="16"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
        </button>
      </form>
    </div>
  </div>

  <script src="/apps/resilience/app.js?v=26"></script>
</body>
</html>

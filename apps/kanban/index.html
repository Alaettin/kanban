<!doctype html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kanban Board ‚Äì Workspace</title>
  <link rel="stylesheet" href="/apps/kanban/styles.css" />
</head>
<body>
  <header class="app-header">
    <a href="/dashboard" class="header-back-btn" title="Zur√ºck zum Dashboard">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6"/></svg>
    </a>
    <div class="brand"><svg class="brand-icon" viewBox="0 0 24 24"><rect x="3" y="3" width="5" height="18" rx="1"/><rect x="10" y="3" width="5" height="12" rx="1"/><rect x="17" y="3" width="5" height="15" rx="1"/></svg>Kanban Board</div>
    <div class="header-search-wrap">
      <div class="header-search">
        <input
          id="board-filter-input"
          class="header-search-input"
          type="search"
          placeholder="Tasks filtern..."
          aria-label="Tasks filtern"
        />
        <button id="board-filter-clear-btn" class="header-search-clear" type="button" title="Suche leeren">
          √ó
        </button>
      </div>
    </div>
    <nav class="header-actions" aria-label="Board Aktionen">
      <div class="header-btn-group">
        <button id="share-project-btn" class="header-btn" type="button" title="Projekt teilen">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 8a3 3 0 1 0-2.9-3.8L7.9 6.7a3 3 0 1 0 0 4.6l4.2 2.5A3 3 0 1 0 13 12" /></svg>
          <span>Teilen</span>
        </button>
        <button id="manage-members-btn" class="header-btn" type="button" title="Rechte verwalten">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M8.5 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM20 8v6M17 11h6" /></svg>
          <span>Rechte</span>
        </button>
        <button id="delete-project-btn" class="header-btn header-btn-danger" type="button" title="Projekt l√∂schen">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 7h16M9 7V5h6v2M8 7l1 12h6l1-12" /></svg>
          <span>L√∂schen</span>
        </button>
      </div>
      <div class="header-btn-group">
        <button id="add-column-btn" class="header-btn" type="button" title="Spalte hinzuf√ºgen">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 5h8v14H3zM15 10v8m-4-4h8" /></svg>
          <span>Spalte</span>
        </button>
        <button id="activity-panel-btn" class="header-btn" type="button" title="Aktivit√§ten">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 8v5l3 2M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9Z" /></svg>
          <span>Aktivit√§t</span>
        </button>
      </div>
      <div class="header-btn-group">
        <button id="export-btn" class="header-btn" type="button" title="Exportieren">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 4v11M8 8l4-4 4 4M5 20h14" /></svg>
          <span>Export</span>
        </button>
        <button id="import-btn" class="header-btn" type="button" title="Importieren">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 20V9M8 13l4 4 4-4M5 4h14" /></svg>
          <span>Import</span>
        </button>
      </div>
      <input id="import-file" type="file" accept="application/json" hidden />
    </nav>
    <div id="sync-status" class="sync-status" data-mode="idle" aria-live="polite" aria-label="Synchronstatus" title="Bereit"></div>
    <div class="user-menu-wrap">
      <button id="user-menu-toggle" class="user-avatar-btn" type="button" aria-haspopup="true" aria-expanded="false">
        <span id="user-initials">--</span>
      </button>
      <div id="user-menu" class="user-menu" hidden>
        <div id="user-info" class="user-menu-info"></div>
        <div class="user-menu-section">
          <div class="locale-switch" role="radiogroup" aria-label="Sprache">
            <button id="locale-de-btn" class="locale-switch-btn active" type="button" role="radio" aria-checked="true">DE</button>
            <button id="locale-en-btn" class="locale-switch-btn" type="button" role="radio" aria-checked="false">EN</button>
          </div>
        </div>
        <button id="logout-btn" class="user-menu-item" type="button">Logout</button>
      </div>
    </div>
  </header>

  <div class="app-layout">
    <aside id="project-sidebar" class="project-sidebar" aria-label="Projekt Tabs">
      <div class="project-sidebar-head">
        <h2 id="project-sidebar-title">Projekte</h2>
        <button id="project-sidebar-toggle" class="project-sidebar-toggle" type="button" title="Navigation einklappen" aria-label="Navigation einklappen">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M14 6l-6 6 6 6" /></svg>
        </button>
      </div>
      <nav id="project-tabs" class="project-tabs"></nav>
      <div class="project-sidebar-foot">
        <button id="add-project-btn" class="sidebar-new-btn" type="button" title="Projekt anlegen">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 4v16M4 12h16" /></svg>
          <span>Neu</span>
        </button>
      </div>
    </aside>

    <main class="board-area">
      <section id="board" class="board" aria-label="Kanban Board"></section>
    </main>
  </div>

  <div id="activity-overlay" class="activity-overlay" hidden></div>
  <aside id="activity-panel" class="activity-panel" aria-hidden="true">
    <header class="activity-panel-header">
      <div>
        <h2 id="activity-panel-title">Letzte Aktivit√§ten</h2>
        <p id="activity-panel-subtitle">Aktivit√§ten im aktuellen Board</p>
      </div>
      <button id="activity-panel-close-btn" class="icon-btn activity-panel-close" type="button" title="Schlie√üen">√ó</button>
    </header>
    <div id="activity-list" class="activity-list"></div>
  </aside>

  <dialog id="item-modal" class="item-modal">
    <form id="item-form" class="item-form" method="dialog">
      <h2 id="item-modal-title">Task</h2>

      <label class="field" for="item-title">
        <span>Titel</span>
        <input id="item-title" name="title" type="text" maxlength="120" required />
      </label>

      <label class="field" for="item-description">
        <span>Beschreibung</span>
        <textarea id="item-description" name="description" rows="4" maxlength="1200"></textarea>
      </label>

      <div class="field-row">
        <label class="field" for="item-priority">
          <span>Priorit√§t</span>
          <select id="item-priority" name="priority" required>
            <option value="low">üü¢ Niedrig</option>
            <option value="medium" selected>üü° Mittel</option>
            <option value="high">üî¥ Hoch</option>
          </select>
        </label>

        <label class="field" for="item-date">
          <span>F√§lligkeitsdatum</span>
          <input id="item-date" name="date" type="date" />
        </label>
      </div>

      <div class="field-row">
        <label class="field" for="item-assignee">
          <span>Zugewiesen an</span>
          <input id="item-assignee" name="assignee" type="text" maxlength="60" placeholder="Name der Person ‚Ä¶" />
        </label>

        <label class="field" for="item-progress">
          <span>Fortschritt ‚Äî <span id="progress-display">0</span>%</span>
          <input id="item-progress" name="progress" type="range" min="0" max="100" step="5" value="0"
            oninput="document.getElementById('progress-display').textContent=this.value" />
        </label>
      </div>

      <label class="field" for="item-tags">
        <span>Tags <small class="field-hint">(kommagetrennt)</small></span>
        <input id="item-tags" name="tags" type="text" maxlength="200" placeholder="z. B. Design, Backend, Bug ‚Ä¶" />
      </label>

      <div class="field">
        <span>Checkliste</span>
        <div id="checklist-items" class="checklist-editor-items"></div>
        <button id="add-checklist-item-btn" class="btn btn-secondary checklist-add-btn" type="button">
          Checklistenpunkt hinzuf√ºgen
        </button>
      </div>

      <div class="modal-actions">
        <button id="item-secondary-btn" class="btn btn-secondary" type="button">Abbrechen</button>
        <button id="item-primary-btn" class="btn" type="submit">Hinzufuegen</button>
      </div>
    </form>
  </dialog>

  <dialog id="confirm-modal" class="confirm-modal">
    <form id="confirm-form" class="confirm-form" method="dialog">
      <h2 id="confirm-title">Bitte best√§tigen</h2>
      <p id="confirm-message"></p>
      <label id="confirm-input-wrap" class="field confirm-input-wrap" hidden>
        <span id="confirm-input-label">Zur Best√§tigung Namen eingeben</span>
        <input id="confirm-input" type="text" autocomplete="off" />
      </label>
      <div class="confirm-actions">
        <button id="confirm-cancel-btn" class="btn btn-secondary" type="submit" value="cancel">Abbrechen</button>
        <button id="confirm-ok-btn" class="btn btn-danger" type="submit" value="confirm">L√∂schen</button>
      </div>
    </form>
  </dialog>

  <dialog id="share-modal" class="share-modal">
    <form id="share-form" class="share-form" method="dialog">
      <h2>Projekt teilen</h2>
      <p>Erstelle einen Link und teile ihn mit deinem Team.</p>

      <label class="field" for="share-role">
        <span>Berechtigung</span>
        <select id="share-role">
          <option value="editor" selected>Editor (kann bearbeiten)</option>
          <option value="viewer">Viewer (nur lesen)</option>
        </select>
      </label>

      <label class="field" for="share-link">
        <span>Einladungslink</span>
        <input id="share-link" type="text" readonly placeholder="Noch kein Link erstellt" />
      </label>

      <div class="share-actions">
        <button id="share-close-btn" class="btn btn-secondary" type="button">Schlie√üen</button>
        <button id="share-copy-btn" class="btn btn-secondary" type="button" disabled>Kopieren</button>
        <button id="share-create-btn" class="btn" type="button">Link erstellen</button>
      </div>
    </form>
  </dialog>

  <dialog id="members-modal" class="members-modal">
    <form id="members-form" class="members-form" method="dialog">
      <h2>Mitglieder & Rechte</h2>
      <p>Rollen f√ºr das aktive Projekt verwalten.</p>
      <div id="members-list" class="members-list"></div>
      <div class="members-actions">
        <button id="members-close-btn" class="btn btn-secondary" type="button">Schlie√üen</button>
        <button id="members-apply-btn" class="btn" type="button" disabled>√úbernehmen</button>
      </div>
    </form>
  </dialog>

  <dialog id="project-name-modal" class="project-name-modal">
    <form id="project-name-form" class="project-name-form" method="dialog">
      <h2 id="project-name-modal-title">Neues Projekt</h2>
      <p id="project-name-message" class="project-name-message" hidden></p>
      <label id="project-name-field" class="field" for="project-name-input">
        <span id="project-name-label">Projektname</span>
        <input id="project-name-input" type="text" maxlength="60" required autocomplete="off" />
      </label>
      <div class="project-name-actions">
        <button id="project-name-cancel-btn" class="btn btn-secondary" type="button">Abbrechen</button>
        <button id="project-name-ok-btn" class="btn" type="submit">Erstellen</button>
      </div>
    </form>
  </dialog>

  <template id="column-template">
    <article class="column">
      <header class="column-header">
        <button class="icon-btn column-drag" title="Spalte verschieben" draggable="true" type="button">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
        </button>
        <input class="column-title" type="text" maxlength="40" />
        <button class="icon-btn collapse-all-btn" title="Alle ein-/ausklappen" type="button">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 9l6 6 6-6"/></svg>
        </button>
        <span class="column-count">0</span>
        <button class="icon-btn delete-column" title="Spalte loeschen" type="button">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
      </header>
      <div class="sort-bar">
        <button class="sort-btn" data-field="name" type="button"><span class="sort-btn-label">Name</span><span class="sort-icon"></span></button>
        <button class="sort-btn" data-field="priority" type="button"><span class="sort-btn-label">Prio</span><span class="sort-icon"></span></button>
        <button class="sort-btn" data-field="date" type="button"><span class="sort-btn-label">Datum</span><span class="sort-icon"></span></button>
      </div>
      <div class="cards"></div>
      <div class="column-footer">
        <button class="add-item-btn" title="Task hinzufuegen" type="button">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5v14M5 12h14"/></svg>
          Hinzuf√ºgen
        </button>
      </div>
    </article>
  </template>

  <template id="card-template">
    <div class="card" draggable="true">
      <div class="card-header-row">
        <span class="card-title"></span>
        <div class="card-header-actions">
          <button class="icon-btn edit-card" title="Task bearbeiten" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
          </button>
          <button class="icon-btn delete-card" title="Task loeschen" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18 6L6 18M6 6l12 12"/></svg>
          </button>
        </div>
      </div>
      <div class="card-body">
        <span class="card-desc"></span>
        <div class="card-assignee-row" hidden>
          <span class="card-assignee-avatar"></span>
          <span class="card-assignee-name"></span>
        </div>
        <div class="card-tags" hidden></div>
        <div class="card-checklist" hidden></div>
        <div class="card-meta">
          <span class="card-priority-badge"></span>
          <span class="card-date"></span>
        </div>
      </div>
      <div class="card-progress-wrap" hidden>
        <div class="card-progress-fill"></div>
      </div>
    </div>
  </template>

  <script src="/apps/kanban/app.js"></script>
</body>
</html>
